<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>單元5：生活中的科技產品 - 小學四年級英文互動練習</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', 'Microsoft JhengHei', sans-serif;
        }
        
        body {
            background-color: #f8f9fa;
            color: #333;
            line-height: 1.6;
            padding: 20px;
            font-size: 18px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background-color: white;
            border-radius: 20px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }
        
        header {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            padding: 30px 40px;
            text-align: center;
        }
        
        h1 {
            font-size: 2.8rem;
            margin-bottom: 15px;
            letter-spacing: 1px;
        }
        
        .subtitle {
            font-size: 1.4rem;
            opacity: 0.9;
            margin-bottom: 10px;
        }
        
        .main-content {
            display: flex;
            flex-wrap: wrap;
            padding: 30px;
            min-height: 800px;
        }
        
        .sidebar {
            flex: 1;
            min-width: 350px;
            background-color: #f8fafc;
            padding: 25px;
            border-radius: 15px;
            margin-left: 30px;
            margin-bottom: 30px;
            order: 2;
        }
        
        .content-area {
            flex: 2;
            min-width: 600px;
            padding: 15px;
            order: 1;
        }
        
        .unit {
            background-color: white;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
            border-left: 8px solid #3498db;
        }
        
        .unit h3 {
            color: #2980b9;
            margin-bottom: 20px;
            font-size: 1.8rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .unit-content {
            padding-left: 15px;
            font-size: 1.1rem;
        }
        
        .tab-container {
            margin-bottom: 40px;
        }
        
        .tabs {
            display: flex;
            background-color: #eef2f7;
            border-radius: 15px 15px 0 0;
            overflow: hidden;
        }
        
        .tab {
            flex: 1;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            font-weight: bold;
            font-size: 1.2rem;
            transition: all 0.3s;
        }
        
        .tab:hover {
            background-color: #dce5f0;
        }
        
        .tab.active {
            background-color: #3498db;
            color: white;
        }
        
        .tab-content {
            display: none;
            padding: 30px;
            background-color: white;
            border-radius: 0 0 15px 15px;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.05);
            min-height: 600px;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .question {
            background-color: #f8fafc;
            padding: 25px;
            margin-bottom: 25px;
            border-radius: 12px;
            border-left: 6px solid #3498db;
        }
        
        .question h4 {
            margin-bottom: 15px;
            color: #2980b9;
            font-size: 1.4rem;
        }
        
        .question p {
            margin-bottom: 15px;
            font-size: 1.1rem;
        }
        
        .options {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-top: 15px;
        }
        
        .option {
            padding: 15px 20px;
            background-color: #eef2f7;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 1.1rem;
            flex: 1;
            min-width: 150px;
            text-align: center;
            border: 2px solid transparent;
        }
        
        .option:hover {
            background-color: #dce5f0;
            transform: translateY(-3px);
        }
        
        .option.selected {
            background-color: #3498db;
            color: white;
            border-color: #2980b9;
        }
        
        /* === 全局統一的視覺反饋樣式 === */
        
        /* 正確答案樣式 - 全局 */
        .option.correct-answer {
            background-color: #d5f4e6 !important;
            border-color: #2ecc71 !important;
            color: #155724 !important;
        }
        
        /* 錯誤答案樣式 - 全局 */
        .option.incorrect-answer {
            background-color: #fce4ec !important;
            border-color: #e74c3c !important;
            color: #721c24 !important;
        }
        
        .answer-input {
            width: 100%;
            padding: 15px;
            border: 2px solid #ddd;
            border-radius: 8px;
            margin-top: 15px;
            font-size: 1.1rem;
            transition: all 0.3s;
        }
        
        /* 輸入框正確樣式 */
        .answer-input.correct-answer {
            background-color: #d5f4e6 !important;
            border-color: #2ecc71 !important;
            color: #155724 !important;
        }
        
        /* 輸入框錯誤樣式 */
        .answer-input.incorrect-answer {
            background-color: #fce4ec !important;
            border-color: #e74c3c !important;
            color: #721c24 !important;
        }
        
        .btn {
            padding: 15px 30px;
            background-color: #3498db;
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1.1rem;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            font-weight: bold;
            margin-top: 15px;
        }
        
        .btn:hover {
            background-color: #2980b9;
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .btn-check {
            background-color: #27ae60;
        }
        
        .btn-check:hover {
            background-color: #219653;
        }
        
        .btn-reset {
            background-color: #e67e22;
        }
        
        .btn-reset:hover {
            background-color: #d35400;
        }
        
        .btn-reference {
            background-color: #9b59b6;
        }
        
        .btn-reference:hover {
            background-color: #8e44ad;
        }
        
        .btn-undo {
            background-color: #95a5a6;
        }
        
        .btn-undo:hover {
            background-color: #7f8c8d;
        }
        
        .result {
            padding: 20px;
            margin-top: 20px;
            border-radius: 10px;
            display: none;
            font-size: 1.1rem;
        }
        
        .result.correct {
            background-color: #d5f4e6;
            color: #27ae60;
            border-left: 6px solid #27ae60;
        }
        
        .result.incorrect {
            background-color: #fde8e8;
            color: #e74c3c;
            border-left: 6px solid #e74c3c;
        }
        
        .reference-answer {
            padding: 20px;
            margin-top: 20px;
            border-radius: 10px;
            display: none;
            background-color: #e8f4fc;
            color: #2980b9;
            border-left: 6px solid #3498db;
        }
        
        .reference-answer.show {
            display: block;
            animation: fadeIn 0.5s;
        }
        
        .score-container {
            text-align: center;
            padding: 30px;
            background-color: #f8fafc;
            border-radius: 15px;
            margin-top: 40px;
            display: none;
        }
        
        .score {
            font-size: 3.5rem;
            font-weight: bold;
            color: #3498db;
            margin: 15px 0;
        }
        
        .vocabulary-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .vocabulary-item {
            background-color: #eef2f7;
            padding: 20px;
            border-radius: 12px;
            text-align: center;
            font-size: 1.2rem;
            font-weight: bold;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
            transition: all 0.3s;
        }
        
        .vocabulary-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 15px rgba(0, 0, 0, 0.1);
        }
        
        .vocabulary-icon {
            font-size: 2.5rem;
            color: #3498db;
        }
        
        .audio-btn {
            background-color: #3498db;
            color: white;
            border: none;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 1.2rem;
            transition: all 0.3s;
            margin-top: 10px;
        }
        
        .audio-btn:hover {
            background-color: #2980b9;
            transform: scale(1.1);
        }
        
        .flashcard-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 25px;
            margin-top: 30px;
        }
        
        .flashcard {
            height: 300px;
            perspective: 1000px;
            cursor: pointer;
        }
        
        .flashcard-inner {
            position: relative;
            width: 100%;
            height: 100%;
            text-align: center;
            transition: transform 0.8s;
            transform-style: preserve-3d;
            border-radius: 20px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2);
        }
        
        .flashcard:hover .flashcard-inner {
            transform: translateY(-10px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.25);
        }
        
        .flashcard.flipped .flashcard-inner {
            transform: rotateY(180deg) translateY(-10px);
        }
        
        .flashcard-front, .flashcard-back {
            position: absolute;
            width: 100%;
            height: 100%;
            -webkit-backface-visibility: hidden;
            backface-visibility: hidden;
            border-radius: 20px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        
        /* 詞彙卡片正面 - 漸變藍色 */
        .flashcard-front {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            box-shadow: inset 0 0 30px rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.1);
        }
        
        .flashcard-back {
            background-color: #f8f9fa;
            color: #333;
            transform: rotateY(180deg);
            overflow: hidden;
            text-align: left;
            justify-content: flex-start;
            padding-top: 30px;
        }
        
        .flashcard-word {
            font-size: 1.8rem;
            font-weight: bold;
            margin-bottom: 15px;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.3);
            color: white;
        }
        
        .flashcard-meaning {
            font-size: 1.3rem;
            margin-bottom: 20px;
            opacity: 0.9;
            color: white;
        }
        
        .flashcard-icon {
            font-size: 3.5rem;
            margin-bottom: 20px;
            opacity: 0.9;
            color: white;
        }
        
        .example-sentence {
            font-size: 1.2rem;
            margin-bottom: 15px;
            line-height: 1.4;
            color: #333;
            font-style: italic;
            text-align: center;
            width: 100%;
        }
        
        .example-translation {
            font-size: 1.1rem;
            color: #666;
            margin-bottom: 20px;
            text-align: center;
            width: 100%;
        }
        
        .example-audio-btn {
            padding: 10px 20px;
            background-color: #9b59b6;
            color: white;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            transition: all 0.3s;
            margin-top: 10px;
        }
        
        .example-audio-btn:hover {
            background-color: #8e44ad;
            transform: scale(1.05);
        }
        
        .pagination-controls {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            margin-top: 40px;
            padding: 20px;
        }
        
        .page-btn {
            padding: 12px 25px;
            background-color: #3498db;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1.1rem;
            font-weight: bold;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .page-btn:hover:not(:disabled) {
            background-color: #2980b9;
            transform: translateY(-3px);
        }
        
        .page-btn:disabled {
            background-color: #bdc3c7;
            cursor: not-allowed;
            opacity: 0.6;
        }
        
        .page-indicator {
            font-size: 1.2rem;
            font-weight: bold;
            color: #3498db;
        }
        
        /* 活動練習樣式 */
        .activity-container {
            margin-top: 30px;
        }
        
        .activity-section {
            background-color: #f8fafc;
            padding: 25px;
            margin-bottom: 30px;
            border-radius: 15px;
            border-left: 6px solid #3498db;
            position: relative;
        }
        
        .activity-title {
            color: #2980b9;
            margin-bottom: 20px;
            font-size: 1.6rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .drag-drop-area {
            display: flex;
            gap: 30px;
            margin-top: 20px;
        }
        
        .drop-zone {
            flex: 1;
            min-height: 300px;
            background-color: #eef2f7;
            border: 3px dashed #3498db;
            border-radius: 15px;
            padding: 20px;
            display: flex;
            flex-direction: column;
        }
        
        .drop-zone-title {
            text-align: center;
            font-weight: bold;
            font-size: 1.3rem;
            margin-bottom: 15px;
            color: #2980b9;
        }
        
        .drag-items-container {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-bottom: 30px;
        }
        
        .drag-item {
            padding: 15px 20px;
            background-color: #3498db;
            color: white;
            border-radius: 8px;
            cursor: move;
            user-select: none;
            text-align: center;
            font-weight: bold;
            transition: all 0.3s;
            border: 2px solid transparent;
        }
        
        .drag-item:hover {
            background-color: #2980b9;
            transform: translateY(-3px);
        }
        
        .drag-item.dragging {
            opacity: 0.5;
        }
        
        .drag-item.correct-answer {
            background-color: #d5f4e6 !important;
            border-color: #2ecc71 !important;
            color: #155724 !important;
        }
        
        .drag-item.incorrect-answer {
            background-color: #fce4ec !important;
            border-color: #e74c3c !important;
            color: #721c24 !important;
        }
        
        .dropped-item {
            padding: 12px 18px;
            background-color: #2ecc71;
            color: white;
            border-radius: 8px;
            margin-bottom: 10px;
            text-align: center;
            font-weight: bold;
        }
        
        .match-container {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }
        
        .question-list, .answer-list {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        
        .match-item {
            padding: 20px;
            background-color: #eef2f7;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
            font-weight: bold;
            border: 2px solid transparent;
        }
        
        .match-item:hover {
            background-color: #dce5f0;
            transform: translateY(-3px);
        }
        
        .match-item.selected {
            background-color: #3498db;
            color: white;
            border-color: #2980b9;
        }
        
        .match-item.correct-answer {
            background-color: #d5f4e6 !important;
            border-color: #2ecc71 !important;
            color: #155724 !important;
        }
        
        .match-item.incorrect-answer {
            background-color: #fce4ec !important;
            border-color: #e74c3c !important;
            color: #721c24 !important;
        }
        
        .match-item.matched {
            background-color: #2ecc71;
            color: white;
        }
        
        .match-line {
            position: absolute;
            background-color: #3498db;
            height: 3px;
            pointer-events: none;
            z-index: 1;
        }
        
        .fill-blank-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .fill-blank-item {
            background-color: #eef2f7;
            padding: 20px;
            border-radius: 10px;
        }
        
        .blank-sentence {
            font-size: 1.2rem;
            margin-bottom: 15px;
            line-height: 1.6;
        }
        
        .blank-input {
            width: 100px;
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 5px;
            font-size: 1.1rem;
            text-align: center;
            transition: all 0.3s;
        }
        
        .blank-input-large {
            width: 200px;
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 5px;
            font-size: 1.1rem;
            text-align: center;
            transition: all 0.3s;
        }
        
        /* 語法填空正確樣式 */
        .blank-input.correct-answer,
        .blank-input-large.correct-answer {
            background-color: #d5f4e6 !important;
            border-color: #2ecc71 !important;
            color: #155724 !important;
        }
        
        /* 語法填空錯誤樣式 */
        .blank-input.incorrect-answer,
        .blank-input-large.incorrect-answer {
            background-color: #fce4ec !important;
            border-color: #e74c3c !important;
            color: #721c24 !important;
        }
        
        /* 事實與觀點表格樣式 */
        .fact-opinion-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background-color: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
        }
        
        .fact-opinion-table th {
            background-color: #3498db;
            color: white;
            padding: 15px;
            text-align: center;
            font-weight: bold;
        }
        
        .fact-opinion-table td {
            padding: 15px;
            text-align: center;
            border-bottom: 1px solid #eee;
        }
        
        .fact-opinion-table tr:last-child td {
            border-bottom: none;
        }
        
        .fact-opinion-table tr:hover {
            background-color: #f8fafc;
        }
        
        .checkbox-option {
            width: 40px;
            height: 40px;
            border: 2px solid #3498db;
            border-radius: 5px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 1.5rem;
            color: transparent;
        }
        
        .checkbox-option:hover {
            background-color: #e8f4fc;
        }
        
        .checkbox-option.selected {
            background-color: #3498db;
            color: white;
        }
        
        .checkbox-option.correct {
            background-color: #d5f4e6;
            border-color: #2ecc71;
            color: #2ecc71;
        }
        
        .checkbox-option.incorrect {
            background-color: #fce4ec;
            border-color: #e74c3c;
            color: #e74c3c;
        }
        
        .badge {
            display: inline-block;
            background-color: #f1c40f;
            color: #333;
            padding: 10px 20px;
            border-radius: 20px;
            font-weight: bold;
            margin-top: 20px;
            font-size: 1.2rem;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
        }
        
        .feedback {
            padding: 15px;
            margin-top: 15px;
            border-radius: 8px;
            font-weight: bold;
            display: none;
        }
        
        .feedback.correct {
            background-color: #d5f4e6;
            color: #27ae60;
            border-left: 4px solid #27ae60;
        }
        
        .feedback.incorrect {
            background-color: #fde8e8;
            color: #e74c3c;
            border-left: 4px solid #e74c3c;
        }
        
        .progress-bar {
            height: 15px;
            background-color: #e0e0e0;
            border-radius: 10px;
            margin: 25px 0;
            overflow: hidden;
        }
        
        .progress {
            height: 100%;
            background-color: #3498db;
            width: 0%;
            transition: width 0.5s;
            border-radius: 10px;
        }
        
        .reading-sample {
            background-color: #f8fafc;
            padding: 25px;
            border-radius: 15px;
            margin-top: 30px;
            border: 2px dashed #3498db;
            font-family: 'Segoe UI', sans-serif;
            font-size: 1.1rem;
            line-height: 1.8;
        }
        
        .paragraph-container {
            margin-bottom: 25px;
            padding-bottom: 20px;
            border-bottom: 1px solid #eee;
        }
        
        .paragraph-container:last-child {
            border-bottom: none;
        }
        
        .paragraph-content {
            font-size: 1.1rem;
            line-height: 1.7;
            margin-bottom: 15px;
        }
        
        .paragraph-buttons {
            display: flex;
            gap: 15px;
            margin-top: 10px;
        }
        
        .paragraph-btn {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s;
            border: none;
            font-size: 1.3rem;
        }
        
        .audio-paragraph-btn {
            background-color: #3498db;
            color: white;
        }
        
        .audio-paragraph-btn:hover {
            background-color: #2980b9;
            transform: scale(1.1);
        }
        
        .translate-btn {
            background-color: #9b59b6;
            color: white;
        }
        
        .translate-btn:hover {
            background-color: #8e44ad;
            transform: scale(1.1);
        }
        
        .translation {
            display: none;
            background-color: #f8f9fa;
            padding: 20px;
            margin-top: 15px;
            border-radius: 10px;
            border-left: 4px solid #9b59b6;
            font-size: 1.1rem;
            line-height: 1.7;
        }
        
        .translation.show {
            display: block;
            animation: fadeIn 0.5s;
        }
        
        .grammar-section {
            margin-top: 30px;
        }
        
        .grammar-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .grammar-card {
            background-color: #eef2f7;
            padding: 20px;
            border-radius: 12px;
            text-align: center;
            position: relative;
            transition: all 0.3s;
        }
        
        .grammar-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 15px rgba(0, 0, 0, 0.1);
        }
        
        .grammar-item {
            font-size: 1.2rem;
            font-weight: bold;
            margin-bottom: 12px;
            color: #2980b9;
        }
        
        .example-btn {
            margin-top: 12px;
            padding: 10px 15px;
            background-color: #9b59b6;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.95rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            transition: all 0.3s;
            width: 100%;
        }
        
        .example-btn:hover {
            background-color: #8e44ad;
            transform: scale(1.05);
        }
        
        .example-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease, padding 0.5s ease;
            padding: 0 15px;
            background-color: #f8f9fa;
            border-radius: 10px;
            margin-top: 10px;
            text-align: left;
        }
        
.example-content.open {
    max-height: 350px;  /* 從 200px 增加到 300px */
    padding: 15px;
    border: 1px solid #ddd;
    overflow-y: auto;   /* 添加滾動條以防萬一 */
}
        
        .example-english {
            font-weight: bold;
            color: #2980b9;
            margin-bottom: 8px;
            font-size: 1rem;
        }
        
        .example-chinese {
            color: #666;
            margin-bottom: 12px;
            font-size: 1.1rem;
            line-height: 1.5;
        }
        
        .audio-example-btn {
            padding: 8px 12px;
            background-color: #3498db;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.9rem;
            display: inline-flex;
            align-items: center;
            gap: 6px;
            transition: all 0.3s;
        }
        
        .audio-example-btn:hover {
            background-color: #2980b9;
        }
        
        .quiz-container {
            margin-top: 30px;
        }
        
        .quiz-section {
            background-color: #f8fafc;
            padding: 25px;
            margin-bottom: 30px;
            border-radius: 15px;
            border-left: 6px solid #3498db;
        }
        
        .quiz-title {
            color: #2980b9;
            margin-bottom: 20px;
            font-size: 1.5rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .quiz-info {
            background-color: #eef2f7;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            font-weight: bold;
            color: #3498db;
        }
        
        /* 歌曲理解專區 */
        .song-container {
            background-color: #f8fafc;
            padding: 25px;
            border-radius: 15px;
            margin-top: 30px;
            border: 2px solid #3498db;
        }
        
        .song-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .song-title {
            color: #2980b9;
            font-size: 1.8rem;
            font-weight: bold;
        }
        
        .song-play-btn {
            background-color: #e74c3c;
            color: white;
            border: none;
            border-radius: 25px;
            padding: 12px 25px;
            font-size: 1.1rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: all 0.3s;
        }
        
        .song-play-btn:hover {
            background-color: #c0392b;
            transform: scale(1.05);
        }
        
        .lyrics-container {
            background-color: white;
            padding: 20px;
            border-radius: 10px;
            line-height: 1.8;
            font-family: 'Courier New', monospace;
            font-size: 1.1rem;
        }
        
        .lyric-line {
            margin-bottom: 10px;
            padding: 8px 12px;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .lyric-line:hover {
            background-color: #e8f4fc;
        }
        
        .lyric-line.selected {
            background-color: #d6eaf8;
            border-left: 4px solid #3498db;
        }
        
        .lyric-explanation {
            display: none;
            background-color: #f8f9fa;
            padding: 15px;
            margin-top: 10px;
            border-radius: 8px;
            border-left: 4px solid #2ecc71;
            font-size: 1rem;
            line-height: 1.6;
        }
        
        .lyric-explanation.show {
            display: block;
            animation: fadeIn 0.5s;
        }
        
        /* 學習進度圓形圖 */
        .progress-summary {
            text-align: center;
            padding: 20px;
            background-color: white;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            margin-bottom: 25px;
            border: 2px solid #eef2f7;
        }
        
        .progress-circle {
            position: relative;
            width: 120px;
            height: 120px;
            margin: 15px auto;
            border-radius: 50%;
            background: conic-gradient(#3498db 0% 0%, #eef2f7 0% 100%);
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .progress-circle-inner {
            width: 90px;
            height: 90px;
            background: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.5rem;
            color: #3498db;
        }
        
        .practice-stats {
            display: flex;
            justify-content: space-around;
            margin-top: 15px;
        }
        
        .stat-item {
            text-align: center;
        }
        
        .stat-value {
            font-size: 1.8rem;
            font-weight: bold;
            color: #3498db;
        }
        
        .stat-label {
            font-size: 0.9rem;
            color: #666;
        }
        
        /* 音頻加載指示器 */
        .audio-loading {
            display: none;
            position: absolute;
            width: 30px;
            height: 30px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid #3498db;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        .audio-btn.loading .audio-loading {
            display: block;
        }
        
        .audio-btn.loading i {
            display: none;
        }
        
        /* 完成總結彈窗 */
        .summary-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }
        
        .summary-content {
            background-color: white;
            padding: 40px;
            border-radius: 20px;
            max-width: 600px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.3);
        }
        
        .summary-header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .summary-stars {
            font-size: 2.5rem;
            color: #f1c40f;
            margin: 15px 0;
        }
        
        .weakness-list {
            margin-top: 20px;
            padding-left: 20px;
        }
        
        .weakness-item {
            padding: 10px;
            background-color: #f8f9fa;
            margin-bottom: 10px;
            border-radius: 8px;
            border-left: 4px solid #e74c3c;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        footer {
            text-align: center;
            padding: 30px;
            background-color: #f8fafc;
            color: #666;
            margin-top: 40px;
            border-top: 2px solid #eee;
            font-size: 1.1rem;
        }
        
        @media (max-width: 1100px) {
            .main-content {
                flex-direction: column;
            }
            
            .sidebar {
                margin-left: 0;
                min-width: 100%;
                order: 1;
            }
            
            .content-area {
                min-width: 100%;
                order: 2;
            }
            
            .drag-drop-area {
                flex-direction: column;
            }
            
            .match-container {
                flex-direction: column;
                gap: 20px;
            }
            
            .grammar-grid {
                grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            }
            
            .tabs {
                flex-wrap: wrap;
            }
            
            .tab {
                flex: 1 0 50%;
            }
            
            .fact-opinion-table {
                font-size: 0.9rem;
            }
        }
        
        @media (max-width: 768px) {
            body {
                font-size: 16px;
                padding: 10px;
            }
            
            h1 {
                font-size: 2.2rem;
            }
            
            .tab {
                padding: 15px 10px;
                font-size: 1rem;
                flex: 1 0 100%;
            }
            
            .flashcard-container {
                grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            }
            
            .vocabulary-list {
                grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            }
            
            .grammar-grid {
                grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            }
            
            .practice-stats {
                flex-direction: column;
                gap: 15px;
            }
            
            .song-header {
                flex-direction: column;
                gap: 15px;
                align-items: flex-start;
            }
        }
        
        /* 無障礙改進 */
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }
        
        .focus-visible {
            outline: 3px solid #3498db;
            outline-offset: 2px;
        }
        
        /* 靜默通知系統 */
        .silent-notification {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: #3498db;
            color: white;
            padding: 15px 20px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.3s, transform 0.3s;
            z-index: 1001;
            max-width: 300px;
        }
        
        .silent-notification.show {
            opacity: 1;
            transform: translateY(0);
        }
        
        /* === 新增：測驗詳細結果樣式 === */
        .quiz-details {
            background-color: #f8fafc;
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
            border-left: 4px solid #3498db;
        }
        
        .quiz-details h4 {
            color: #2980b9;
            margin-bottom: 15px;
        }
        
        .quiz-details h5 {
            color: #3498db;
            margin-bottom: 10px;
        }
        
        .quiz-details .answer-status {
            margin-bottom: 5px;
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 0.95rem;
        }
        
        .quiz-details .answer-status.correct {
            background-color: #d5f4e6;
            color: #155724;
            border-left: 3px solid #27ae60;
        }
        
        .quiz-details .answer-status.incorrect {
            background-color: #fde8e8;
            color: #721c24;
            border-left: 3px solid #e74c3c;
        }
        
        .quiz-details .answer-status.unanswered {
            background-color: #fff3cd;
            color: #856404;
            border-left: 3px solid #f39c12;
        }

/* === 新增：測驗詳細結果樣式 === */
.quiz-details {
    background-color: #f8fafc;
    padding: 20px;
    border-radius: 10px;
    margin-top: 20px;
    border-left: 4px solid #3498db;
}

.quiz-details h4 {
    color: #2980b9;
    margin-bottom: 15px;
}

.quiz-details h5 {
    color: #3498db;
    margin-bottom: 10px;
}

.quiz-details .answer-status {
    margin-bottom: 5px;
    padding: 5px 10px;
    border-radius: 5px;
    font-size: 0.95rem;
}

.quiz-details .answer-status.correct {
    background-color: #d5f4e6;
    color: #155724;
    border-left: 3px solid #27ae60;
}

.quiz-details .answer-status.incorrect {
    background-color: #fde8e8;
    color: #721c24;
    border-left: 3px solid #e74c3c;
}

.quiz-details .answer-status.unanswered {
    background-color: #fff3cd;
    color: #856404;
    border-left: 3px solid #f39c12;
}

/* 音頻播放器控制 */
.audio-player {
    display: none;
}

    </style>
	<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-KYEHKQ73SN"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-KYEHKQ73SN');
</script>
</head>
<body>
    <div class="container">
        <header>
            <h1><i class="fas fa-laptop"></i> 小學四年級英文</h1>
            <p class="subtitle">單元 5：Gadgets in Our Life (生活中的科技產品)</p>
        </header>
        
        <div class="main-content">
            <div class="content-area">
                <div class="tab-container">
                    <div class="tabs">
                        <div class="tab active" data-tab="flashcards" aria-label="切換到詞彙卡片分頁">詞彙卡片</div>
                        <div class="tab" data-tab="practice" aria-label="切換到互動練習分頁">互動練習</div>
                        <div class="tab" data-tab="quiz" aria-label="切換到單元測驗分頁">單元測驗</div>
                        <div class="tab" data-tab="reading" aria-label="切換到閱讀理解分頁">閱讀理解</div>
                    </div>
                    
                    <div class="tab-content active" id="flashcards">
                        <h3><i class="fas fa-id-card"></i> 詞彙卡片</h3>
                        <p>點擊卡片查看例句，點擊音頻按鈕聆聽發音：</p>
                        
                        <!-- 第一頁詞彙卡片：科技產品 -->
                        <div class="flashcard-container" id="page1">
                            <!-- 數位相機卡片 -->
                            <div class="flashcard" data-word="digital camera">
                                <div class="flashcard-inner">
                                    <div class="flashcard-front">
                                        <div class="flashcard-icon"><i class="fas fa-camera"></i></div>
                                        <div class="flashcard-word">digital camera</div>
                                        <div class="flashcard-meaning">數位相機</div>
                                        <button class="audio-btn" data-audio="digital_camera" aria-label="播放digital camera發音">
                                            <i class="fas fa-volume-up"></i>
                                            <span class="audio-loading"></span>
                                        </button>
                                    </div>
                                    <div class="flashcard-back">
                                        <div class="example-sentence">My dad bought a new digital camera.</div>
                                        <div class="example-translation">我爸爸買了一台新的數位相機。</div>
                                        <button class="example-audio-btn" data-audio="digital_camera_example" aria-label="播放例句音頻">
                                            <i class="fas fa-volume-up"></i> 播放
                                            <span class="audio-loading"></span>
                                        </button>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- 行動電話卡片 -->
                            <div class="flashcard" data-word="mobile phone">
                                <div class="flashcard-inner">
                                    <div class="flashcard-front">
                                        <div class="flashcard-icon"><i class="fas fa-mobile-alt"></i></div>
                                        <div class="flashcard-word">mobile phone</div>
                                        <div class="flashcard-meaning">行動電話</div>
                                        <button class="audio-btn" data-audio="mobile_phone" aria-label="播放mobile phone發音">
                                            <i class="fas fa-volume-up"></i>
                                            <span class="audio-loading"></span>
                                        </button>
                                    </div>
                                    <div class="flashcard-back">
                                        <div class="example-sentence">Karen thinks new mobile phones are awesome.</div>
                                        <div class="example-translation">Karen認為新的行動電話很厲害。</div>
                                        <button class="example-audio-btn" data-audio="mobile_phone_example" aria-label="播放例句音頻">
                                            <i class="fas fa-volume-up"></i> 播放
                                            <span class="audio-loading"></span>
                                        </button>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- 電腦卡片 -->
                            <div class="flashcard" data-word="computer">
                                <div class="flashcard-inner">
                                    <div class="flashcard-front">
                                        <div class="flashcard-icon"><i class="fas fa-laptop"></i></div>
                                        <div class="flashcard-word">computer</div>
                                        <div class="flashcard-meaning">電腦</div>
                                        <button class="audio-btn" data-audio="computer" aria-label="播放computer發音">
                                            <i class="fas fa-volume-up"></i>
                                            <span class="audio-loading"></span>
                                        </button>
                                    </div>
                                    <div class="flashcard-back">
                                        <div class="example-sentence">We can type letters on a computer.</div>
                                        <div class="example-translation">我們可以用電腦打信件。</div>
                                        <button class="example-audio-btn" data-audio="computer_example" aria-label="播放例句音頻">
                                            <i class="fas fa-volume-up"></i> 播放
                                            <span class="audio-loading"></span>
                                        </button>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- 電視卡片 -->
                            <div class="flashcard" data-word="TV set">
                                <div class="flashcard-inner">
                                    <div class="flashcard-front">
                                        <div class="flashcard-icon"><i class="fas fa-tv"></i></div>
                                        <div class="flashcard-word">TV set</div>
                                        <div class="flashcard-meaning">電視機</div>
                                        <button class="audio-btn" data-audio="tv_set" aria-label="播放TV set發音">
                                            <i class="fas fa-volume-up"></i>
                                            <span class="audio-loading"></span>
                                        </button>
                                    </div>
                                    <div class="flashcard-back">
                                        <div class="example-sentence">Andy's grandpa doesn't want to buy a new TV set.</div>
                                        <div class="example-translation">Andy的爺爺不想買新的電視機。</div>
                                        <button class="example-audio-btn" data-audio="tv_set_example" aria-label="播放例句音頻">
                                            <i class="fas fa-volume-up"></i> 播放
                                            <span class="audio-loading"></span>
                                        </button>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- 打字機卡片 -->
                            <div class="flashcard" data-word="typewriter">
                                <div class="flashcard-inner">
                                    <div class="flashcard-front">
                                        <div class="flashcard-icon"><i class="fas fa-keyboard"></i></div>
                                        <div class="flashcard-word">typewriter</div>
                                        <div class="flashcard-meaning">打字機</div>
                                        <button class="audio-btn" data-audio="typewriter" aria-label="播放typewriter發音">
                                            <i class="fas fa-volume-up"></i>
                                            <span class="audio-loading"></span>
                                        </button>
                                    </div>
                                    <div class="flashcard-back">
                                        <div class="example-sentence">People used typewriters before computers.</div>
                                        <div class="example-translation">在電腦出現之前人們使用打字機。</div>
                                        <button class="example-audio-btn" data-audio="typewriter_example" aria-label="播放例句音頻">
                                            <i class="fas fa-volume-up"></i> 播放
                                            <span class="audio-loading"></span>
                                        </button>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- 唱片播放機卡片 -->
                            <div class="flashcard" data-word="record player">
                                <div class="flashcard-inner">
                                    <div class="flashcard-front">
                                        <div class="flashcard-icon"><i class="fas fa-compact-disc"></i></div>
                                        <div class="flashcard-word">record player</div>
                                        <div class="flashcard-meaning">唱片播放機</div>
                                        <button class="audio-btn" data-audio="record_player" aria-label="播放record player發音">
                                            <i class="fas fa-volume-up"></i>
                                            <span class="audio-loading"></span>
                                        </button>
                                    </div>
                                    <div class="flashcard-back">
                                        <div class="example-sentence">Grandpa likes to listen to music on his record player.</div>
                                        <div class="example-translation">爺爺喜歡用他的唱片播放機聽音樂。</div>
                                        <button class="example-audio-btn" data-audio="record_player_example" aria-label="播放例句音頻">
                                            <i class="fas fa-volume-up"></i> 播放
                                            <span class="audio-loading"></span>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 第二頁詞彙卡片：形容詞 -->
                        <div class="flashcard-container" id="page2" style="display: none;">
                            <!-- 現代卡片 -->
                            <div class="flashcard" data-word="modern">
                                <div class="flashcard-inner">
                                    <div class="flashcard-front">
                                        <div class="flashcard-icon"><i class="fas fa-rocket"></i></div>
                                        <div class="flashcard-word">modern</div>
                                        <div class="flashcard-meaning">現代的</div>
                                        <button class="audio-btn" data-audio="modern" aria-label="播放modern發音">
                                            <i class="fas fa-volume-up"></i>
                                            <span class="audio-loading"></span>
                                        </button>
                                    </div>
                                    <div class="flashcard-back">
                                        <div class="example-sentence">New things look modern.</div>
                                        <div class="example-translation">新事物看起來很現代。</div>
                                        <button class="example-audio-btn" data-audio="modern_example" aria-label="播放例句音頻">
                                            <i class="fas fa-volume-up"></i> 播放
                                            <span class="audio-loading"></span>
                                        </button>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- 厲害卡片 -->
                            <div class="flashcard" data-word="awesome">
                                <div class="flashcard-inner">
                                    <div class="flashcard-front">
                                        <div class="flashcard-icon"><i class="fas fa-star"></i></div>
                                        <div class="flashcard-word">awesome</div>
                                        <div class="flashcard-meaning">厲害的、很棒的</div>
                                        <button class="audio-btn" data-audio="awesome" aria-label="播放awesome發音">
                                            <i class="fas fa-volume-up"></i>
                                            <span class="audio-loading"></span>
                                        </button>
                                    </div>
                                    <div class="flashcard-back">
                                        <div class="example-sentence">My dad's new phone is awesome!</div>
                                        <div class="example-translation">我爸爸的新手機很厲害！</div>
                                        <button class="example-audio-btn" data-audio="awesome_example" aria-label="播放例句音頻">
                                            <i class="fas fa-volume-up"></i> 播放
                                            <span class="audio-loading"></span>
                                        </button>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- 悅耳卡片 -->
                            <div class="flashcard" data-word="pleasant">
                                <div class="flashcard-inner">
                                    <div class="flashcard-front">
                                        <div class="flashcard-icon"><i class="fas fa-music"></i></div>
                                        <div class="flashcard-word">pleasant</div>
                                        <div class="flashcard-meaning">悅耳的、令人愉快的</div>
                                        <button class="audio-btn" data-audio="pleasant" aria-label="播放pleasant發音">
                                            <i class="fas fa-volume-up"></i>
                                            <span class="audio-loading"></span>
                                        </button>
                                    </div>
                                    <div class="flashcard-back">
                                        <div class="example-sentence">The old songs are quite pleasant to the ears.</div>
                                        <div class="example-translation">那些老歌聽起來很悅耳。</div>
                                        <button class="example-audio-btn" data-audio="pleasant_example" aria-label="播放例句音頻">
                                            <i class="fas fa-volume-up"></i> 播放
                                            <span class="audio-loading"></span>
                                        </button>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- 展覽卡片 -->
                            <div class="flashcard" data-word="exhibition">
                                <div class="flashcard-inner">
                                    <div class="flashcard-front">
                                        <div class="flashcard-icon"><i class="fas fa-images"></i></div>
                                        <div class="flashcard-word">exhibition</div>
                                        <div class="flashcard-meaning">展覽</div>
                                        <button class="audio-btn" data-audio="exhibition" aria-label="播放exhibition發音">
                                            <i class="fas fa-volume-up"></i>
                                            <span class="audio-loading"></span>
                                        </button>
                                    </div>
                                    <div class="flashcard-back">
                                        <div class="example-sentence">We visited an exhibition at the Science Museum.</div>
                                        <div class="example-translation">我們參觀了科學博物館的展覽。</div>
                                        <button class="example-audio-btn" data-audio="exhibition_example" aria-label="播放例句音頻">
                                            <i class="fas fa-volume-up"></i> 播放
                                            <span class="audio-loading"></span>
                                        </button>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- 價值卡片 -->
                            <div class="flashcard" data-word="value">
                                <div class="flashcard-inner">
                                    <div class="flashcard-front">
                                        <div class="flashcard-icon"><i class="fas fa-gem"></i></div>
                                        <div class="flashcard-word">value</div>
                                        <div class="flashcard-meaning">價值</div>
                                        <button class="audio-btn" data-audio="value" aria-label="播放value發音">
                                            <i class="fas fa-volume-up"></i>
                                            <span class="audio-loading"></span>
                                        </button>
                                    </div>
                                    <div class="flashcard-back">
                                        <div class="example-sentence">Old things have their value too.</div>
                                        <div class="example-translation">舊事物也有它們的價值。</div>
                                        <button class="example-audio-btn" data-audio="value_example" aria-label="播放例句音頻">
                                            <i class="fas fa-volume-up"></i> 播放
                                            <span class="audio-loading"></span>
                                        </button>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- 小工具卡片 -->
                            <div class="flashcard" data-word="gadget">
                                <div class="flashcard-inner">
                                    <div class="flashcard-front">
                                        <div class="flashcard-icon"><i class="fas fa-tools"></i></div>
                                        <div class="flashcard-word">gadget</div>
                                        <div class="flashcard-meaning">小工具、小裝置</div>
                                        <button class="audio-btn" data-audio="gadget" aria-label="播放gadget發音">
                                            <i class="fas fa-volume-up"></i>
                                            <span class="audio-loading"></span>
                                        </button>
                                    </div>
                                    <div class="flashcard-back">
                                        <div class="example-sentence">I like high-tech gadgets.</div>
                                        <div class="example-translation">我喜歡高科技的小工具。</div>
                                        <button class="example-audio-btn" data-audio="gadget_example" aria-label="播放例句音頻">
                                            <i class="fas fa-volume-up"></i> 播放
                                            <span class="audio-loading"></span>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
<!-- 第三頁詞彙卡片：常用片語 -->
<div class="flashcard-container" id="page3" style="display: none;">
    <!-- 動詞片語 -->
  
    <div class="flashcard" data-word="take pictures">
        <div class="flashcard-inner">
            <div class="flashcard-front">
                <div class="flashcard-icon"><i class="fas fa-camera"></i></div>
                <div class="flashcard-word">take pictures</div>
                <div class="flashcard-meaning">拍照</div>
                <button class="audio-btn" data-audio="take_pictures" aria-label="播放take pictures發音">
                    <i class="fas fa-volume-up"></i>
                    <span class="audio-loading"></span>
                </button>
            </div>
            <div class="flashcard-back">
                <div class="example-sentence">People can take pictures with both a film camera and a digital camera.</div>
                <div class="example-translation">人們既可以用膠片相機也可以用數位相機拍照。</div>
                <button class="example-audio-btn" data-audio="take_pictures_example" aria-label="播放例句音頻">
                    <i class="fas fa-volume-up"></i> 播放
                    <span class="audio-loading"></span>
                </button>
            </div>
        </div>
    </div>
    
    <div class="flashcard" data-word="listen to music">
        <div class="flashcard-inner">
            <div class="flashcard-front">
                <div class="flashcard-icon"><i class="fas fa-music"></i></div>
                <div class="flashcard-word">listen to music</div>
                <div class="flashcard-meaning">聽音樂</div>
                <button class="audio-btn" data-audio="listen_music" aria-label="播放listen to music發音">
                    <i class="fas fa-volume-up"></i>
                    <span class="audio-loading"></span>
                </button>
            </div>
            <div class="flashcard-back">
                <div class="example-sentence">Both a record player and an MP3 player can be used to listen to music.</div>
                <div class="example-translation">唱片播放機和MP3播放器都可以用來聽音樂。</div>
                <button class="example-audio-btn" data-audio="listen_music_example" aria-label="播放例句音頻">
                    <i class="fas fa-volume-up"></i> 播放
                    <span class="audio-loading"></span>
                </button>
            </div>
        </div>
    </div>
    
    <!-- 比較結構片語 -->
    <div class="flashcard" data-word="be better than">
        <div class="flashcard-inner">
            <div class="flashcard-front">
                <div class="flashcard-icon"><i class="fas fa-thumbs-up"></i></div>
                <div class="flashcard-word">be better than</div>
                <div class="flashcard-meaning">比...更好</div>
                <button class="audio-btn" data-audio="better_than" aria-label="播放be better than發音">
                    <i class="fas fa-volume-up"></i>
                    <span class="audio-loading"></span>
                </button>
            </div>
            <div class="flashcard-back">
                <div class="example-sentence">Her old camera is better than digital cameras.</div>
                <div class="example-translation">她的舊相機比數位相機更好。</div>
                <button class="example-audio-btn" data-audio="better_than_example" aria-label="播放例句音頻">
                    <i class="fas fa-volume-up"></i> 播放
                    <span class="audio-loading"></span>
                </button>
            </div>
        </div>
    </div>
    
    <div class="flashcard" data-word="be worse than">
        <div class="flashcard-inner">
            <div class="flashcard-front">
                <div class="flashcard-icon"><i class="fas fa-thumbs-down"></i></div>
                <div class="flashcard-word">be worse than</div>
                <div class="flashcard-meaning">比...更差</div>
                <button class="audio-btn" data-audio="worse_than" aria-label="播放be worse than發音">
                    <i class="fas fa-volume-up"></i>
                    <span class="audio-loading"></span>
                </button>
            </div>
            <div class="flashcard-back">
                <div class="example-sentence">Old machines are worse than new gadgets.</div>
                <div class="example-translation">舊機器比新的小工具更差。</div>
                <button class="example-audio-btn" data-audio="worse_than_example" aria-label="播放例句音頻">
                    <i class="fas fa-volume-up"></i> 播放
                    <span class="audio-loading"></span>
                </button>
            </div>
        </div>
    </div>
    
    <div class="flashcard" data-word="be the best">
        <div class="flashcard-inner">
            <div class="flashcard-front">
                <div class="flashcard-icon"><i class="fas fa-trophy"></i></div>
                <div class="flashcard-word">be the best</div>
                <div class="flashcard-meaning">是最好的</div>
                <button class="audio-btn" data-audio="the_best" aria-label="播放be the best發音">
                    <i class="fas fa-volume-up"></i>
                    <span class="audio-loading"></span>
                </button>
            </div>
            <div class="flashcard-back">
                <div class="example-sentence">I think the newest things are the best.</div>
                <div class="example-translation">我認為最新的東西是最好的。</div>
                <button class="example-audio-btn" data-audio="the_best_example" aria-label="播放例句音頻">
                    <i class="fas fa-volume-up"></i> 播放
                    <span class="audio-loading"></span>
                </button>
            </div>
        </div>
    </div>
    
    <div class="flashcard" data-word="be the worst">
        <div class="flashcard-inner">
            <div class="flashcard-front">
                <div class="flashcard-icon"><i class="fas fa-exclamation-triangle"></i></div>
                <div class="flashcard-word">be the worst</div>
                <div class="flashcard-meaning">是最差的</div>
                <button class="audio-btn" data-audio="the_worst" aria-label="播放be the worst發音">
                    <i class="fas fa-volume-up"></i>
                    <span class="audio-loading"></span>
                </button>
            </div>
            <div class="flashcard-back">
                <div class="example-sentence">It has the worst picture quality in the whole building.</div>
                <div class="example-translation">它在整棟大樓裡畫質最差。</div>
                <button class="example-audio-btn" data-audio="the_worst_example" aria-label="播放例句音頻">
                    <i class="fas fa-volume-up"></i> 播放
                    <span class="audio-loading"></span>
                </button>
            </div>
        </div>
    </div>
    
    <!-- 連接詞片語 -->
    <div class="flashcard" data-word="both...and...">
        <div class="flashcard-inner">
            <div class="flashcard-front">
                <div class="flashcard-icon"><i class="fas fa-link"></i></div>
                <div class="flashcard-word">both...and...</div>
                <div class="flashcard-meaning">既...又...</div>
                <button class="audio-btn" data-audio="both_and" aria-label="播放both...and...發音">
                    <i class="fas fa-volume-up"></i>
                    <span class="audio-loading"></span>
                </button>
            </div>
            <div class="flashcard-back">
                <div class="example-sentence">I like both the old things and the new things.</div>
                <div class="example-translation">我既喜歡舊的東西也喜歡新的東西。</div>
                <button class="example-audio-btn" data-audio="both_and_example" aria-label="播放例句音頻">
                    <i class="fas fa-volume-up"></i> 播放
                    <span class="audio-loading"></span>
                </button>
            </div>
        </div>
    </div>
    
    <div class="flashcard" data-word="even though">
        <div class="flashcard-inner">
            <div class="flashcard-front">
                <div class="flashcard-icon"><i class="fas fa-balance-scale"></i></div>
                <div class="flashcard-word">even though</div>
                <div class="flashcard-meaning">即使</div>
                <button class="audio-btn" data-audio="even_though" aria-label="播放even though發音">
                    <i class="fas fa-volume-up"></i>
                    <span class="audio-loading"></span>
                </button>
            </div>
            <div class="flashcard-back">
                <div class="example-sentence">He doesn't want to buy a new TV set even though it has the worst picture quality.</div>
                <div class="example-translation">即使畫質最差，他還是不想買新的電視機。</div>
                <button class="example-audio-btn" data-audio="even_though_example" aria-label="播放例句音頻">
                    <i class="fas fa-volume-up"></i> 播放
                    <span class="audio-loading"></span>
                </button>
            </div>
        </div>
    </div>
    
    <!-- 其他常用表達 -->
    <div class="flashcard" data-word="I think">
        <div class="flashcard-inner">
            <div class="flashcard-front">
                <div class="flashcard-icon"><i class="fas fa-brain"></i></div>
                <div class="flashcard-word">I think</div>
                <div class="flashcard-meaning">我認為</div>
                <button class="audio-btn" data-audio="i_think" aria-label="播放I think發音">
                    <i class="fas fa-volume-up"></i>
                    <span class="audio-loading"></span>
                </button>
            </div>
            <div class="flashcard-back">
                <div class="example-sentence">I think the newest things are the best.</div>
                <div class="example-translation">我認為最新的東西是最好的。</div>
                <button class="example-audio-btn" data-audio="i_think_example" aria-label="播放例句音頻">
                    <i class="fas fa-volume-up"></i> 播放
                    <span class="audio-loading"></span>
                </button>
            </div>
        </div>
    </div>

    <div class="flashcard" data-word="I agree">
        <div class="flashcard-inner">
            <div class="flashcard-front">
                <div class="flashcard-icon"><i class="fas fa-handshake"></i></div>
                <div class="flashcard-word">I agree</div>
                <div class="flashcard-meaning">我同意</div>
                <button class="audio-btn" data-audio="i_agree" aria-label="播放I agree發音">
                    <i class="fas fa-volume-up"></i>
                    <span class="audio-loading"></span>
                </button>
            </div>
            <div class="flashcard-back">
                <div class="example-sentence">"I agree. That's why we shouldn't forget old things have their value, too!"</div>
                <div class="example-translation">"我同意。這就是為什麼我們不應該忘記舊東西也有它們的價值！"</div>
                <button class="example-audio-btn" data-audio="i_agree_example" aria-label="播放例句音頻">
                    <i class="fas fa-volume-up"></i> 播放
                    <span class="audio-loading"></span>
                </button>
            </div>
        </div>
    </div>
    
    
    <div class="flashcard" data-word="Are you serious?">
        <div class="flashcard-inner">
            <div class="flashcard-front">
                <div class="flashcard-icon"><i class="fas fa-question-circle"></i></div>
                <div class="flashcard-word">Are you serious?</div>
                <div class="flashcard-meaning">你是認真的嗎？</div>
                <button class="audio-btn" data-audio="are_you_serious" aria-label="播放Are you serious?發音">
                    <i class="fas fa-volume-up"></i>
                    <span class="audio-loading"></span>
                </button>
            </div>
            <div class="flashcard-back">
                <div class="example-sentence">"Are you serious?" doubted Karen.</div>
                <div class="example-translation">"你是認真的嗎？" Karen懷疑地說。</div>
                <button class="example-audio-btn" data-audio="are_you_serious_example" aria-label="播放例句音頻">
                    <i class="fas fa-volume-up"></i> 播放
                    <span class="audio-loading"></span>
                </button>
            </div>
        </div>
    </div>

    
    <div class="flashcard" data-word="That's true">
        <div class="flashcard-inner">
            <div class="flashcard-front">
                <div class="flashcard-icon"><i class="fas fa-check-circle"></i></div>
                <div class="flashcard-word">That's true</div>
                <div class="flashcard-meaning">那是真的</div>
                <button class="audio-btn" data-audio="thats_true" aria-label="播放That's true發音">
                    <i class="fas fa-volume-up"></i>
                    <span class="audio-loading"></span>
                </button>
            </div>
            <div class="flashcard-back">
                <div class="example-sentence">"That's true. And those old songs are actually quite pleasant to the ears."</div>
                <div class="example-translation">"那是真的。而且那些老歌實際上很悅耳。"</div>
                <button class="example-audio-btn" data-audio="thats_true_example" aria-label="播放例句音頻">
                    <i class="fas fa-volume-up"></i> 播放
                    <span class="audio-loading"></span>
                </button>
            </div>
        </div>
    </div>
    

    <div class="flashcard" data-word="according to">
        <div class="flashcard-inner">
            <div class="flashcard-front">
                <div class="flashcard-icon"><i class="fas fa-chart-line"></i></div>
                <div class="flashcard-word">according to</div>
                <div class="flashcard-meaning">根據</div>
                <button class="audio-btn" data-audio="according_to" aria-label="播放according to發音">
                    <i class="fas fa-volume-up"></i>
                    <span class="audio-loading"></span>
                </button>
            </div>
            <div class="flashcard-back">
                <div class="example-sentence">According to Karen, old machines are worse than new gadgets.</div>
                <div class="example-translation">根據Karen的說法，舊機器比新的小工具更差。</div>
                <button class="example-audio-btn" data-audio="according_to_example" aria-label="播放例句音頻">
                    <i class="fas fa-volume-up"></i> 播放
                    <span class="audio-loading"></span>
                </button>
            </div>
        </div>
    </div>
    
    <div class="flashcard" data-word="in my opinion">
        <div class="flashcard-inner">
            <div class="flashcard-front">
                <div class="flashcard-icon"><i class="fas fa-user-edit"></i></div>
                <div class="flashcard-word">in my opinion</div>
                <div class="flashcard-meaning">在我看來</div>
                <button class="audio-btn" data-audio="in_my_opinion" aria-label="播放in my opinion發音">
                    <i class="fas fa-volume-up"></i>
                    <span class="audio-loading"></span>
                </button>
            </div>
            <div class="flashcard-back">
                <div class="example-sentence">In my opinion, the old camera takes nicer pictures.</div>
                <div class="example-translation">在我看來，舊相機拍的照片更漂亮。</div>
                <button class="example-audio-btn" data-audio="in_my_opinion_example" aria-label="播放例句音頻">
                    <i class="fas fa-volume-up"></i> 播放
                    <span class="audio-loading"></span>
                </button>
            </div>
        </div>
    </div>
    
    <div class="flashcard" data-word="for example">
        <div class="flashcard-inner">
            <div class="flashcard-front">
                <div class="flashcard-icon"><i class="fas fa-list-ul"></i></div>
                <div class="flashcard-word">for example</div>
                <div class="flashcard-meaning">例如</div>
                <button class="audio-btn" data-audio="for_example" aria-label="播放for example發音">
                    <i class="fas fa-volume-up"></i>
                    <span class="audio-loading"></span>
                </button>
            </div>
            <div class="flashcard-back">
                <div class="example-sentence">Some old gadgets still work well, for example, old record players.</div>
                <div class="example-translation">一些舊的小工具仍然運作良好，例如，舊的唱片播放機。</div>
                <button class="example-audio-btn" data-audio="for_example_example" aria-label="播放例句音頻">
                    <i class="fas fa-volume-up"></i> 播放
                    <span class="audio-loading"></span>
                </button>
            </div>
        </div>
    </div>
    
    <div class="flashcard" data-word="such as">
        <div class="flashcard-inner">
            <div class="flashcard-front">
                <div class="flashcard-icon"><i class="fas fa-list-alt"></i></div>
                <div class="flashcard-word">such as</div>
                <div class="flashcard-meaning">例如</div>
                <button class="audio-btn" data-audio="such_as" aria-label="播放such as發音">
                    <i class="fas fa-volume-up"></i>
                    <span class="audio-loading"></span>
                </button>
            </div>
            <div class="flashcard-back">
                <div class="example-sentence">We saw many old gadgets, such as typewriters and record players.</div>
                <div class="example-translation">我們看到了很多舊的小工具，例如打字機和唱片播放機。</div>
                <button class="example-audio-btn" data-audio="such_as_example" aria-label="播放例句音頻">
                    <i class="fas fa-volume-up"></i> 播放
                    <span class="audio-loading"></span>
                </button>
            </div>
        </div>
    </div>
 </div>   
                        <!-- 分頁控制 -->
                        <div class="pagination-controls">
                            <button class="page-btn" id="prevPage" disabled aria-label="上一頁詞彙卡片">
                                <i class="fas fa-chevron-left"></i> 上一頁
                            </button>
                            <span class="page-indicator" id="pageIndicator">第 1 頁 / 共 2 頁</span>
                            <button class="page-btn" id="nextPage" aria-label="下一頁詞彙卡片">
                                下一頁 <i class="fas fa-chevron-right"></i>
                            </button>
                        </div>
                    </div>
                    
                    <div class="tab-content" id="practice">
                        <h3><i class="fas fa-pencil-alt"></i> 互動練習</h3>
                        <p>根據單元5內容完成以下練習題：</p>
                        
                        <!-- 練習 1：事實與觀點辨析題 -->
                        <div class="activity-section">
                            <h4 class="activity-title">
                                <i class="fas fa-check-circle"></i> 練習 1：事實與觀點辨析題
                            </h4>
                            <p>判斷下列句子屬於事實（Fact）還是觀點（Opinion），點擊對應的方框：</p>
                            
                            <table class="fact-opinion-table">
                                <thead>
                                    <tr>
                                        <th>句子</th>
                                        <th>Fact（事實）</th>
                                        <th>Opinion（觀點）</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>1. Amy and her classmates visited the Hong Kong Science Museum last week.</td>
                                        <td>
                                            <div class="checkbox-option" data-question="1" data-type="fact" onclick="selectFactOpinion(1, 'fact')">✓</div>
                                        </td>
                                        <td>
                                            <div class="checkbox-option" data-question="1" data-type="opinion" onclick="selectFactOpinion(1, 'opinion')">✓</div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>2. Old cameras are better than digital cameras.</td>
                                        <td>
                                            <div class="checkbox-option" data-question="2" data-type="fact" onclick="selectFactOpinion(2, 'fact')">✓</div>
                                        </td>
                                        <td>
                                            <div class="checkbox-option" data-question="2" data-type="opinion" onclick="selectFactOpinion(2, 'opinion')">✓</div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>3. Andy's grandpa's old TV set was a gift from his father.</td>
                                        <td>
                                            <div class="checkbox-option" data-question="3" data-type="fact" onclick="selectFactOpinion(3, 'fact')">✓</div>
                                        </td>
                                        <td>
                                            <div class="checkbox-option" data-question="3" data-type="opinion" onclick="selectFactOpinion(3, 'opinion')">✓</div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>4. People can use both typewriters and computers to type letters and stories.</td>
                                        <td>
                                            <div class="checkbox-option" data-question="4" data-type="fact" onclick="selectFactOpinion(4, 'fact')">✓</div>
                                        </td>
                                        <td>
                                            <div class="checkbox-option" data-question="4" data-type="opinion" onclick="selectFactOpinion(4, 'opinion')">✓</div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>5. The old songs Amy's parents listen to are quite pleasant to the ears.</td>
                                        <td>
                                            <div class="checkbox-option" data-question="5" data-type="fact" onclick="selectFactOpinion(5, 'fact')">✓</div>
                                        </td>
                                        <td>
                                            <div class="checkbox-option" data-question="5" data-type="opinion" onclick="selectFactOpinion(5, 'opinion')">✓</div>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                            
                            <div class="feedback" id="factOpinionFeedback"></div>
                            
                            <button class="btn btn-check" onclick="checkFactOpinion()" aria-label="檢查事實與觀點答案">
                                <i class="fas fa-check"></i> 檢查答案
                            </button>
                            <button class="btn btn-reset" onclick="resetFactOpinion()" aria-label="重設事實與觀點練習">
                                <i class="fas fa-redo"></i> 重新開始
                            </button>
                        </div>
                        
                        <!-- 練習 2：詞彙匹配題 -->
                        <div class="activity-section">
                            <h4 class="activity-title">
                                <i class="fas fa-link"></i> 練習 2：詞彙匹配題
                            </h4>
                            <p>將下列單字與正確的釋義匹配：</p>
                            
                            <div class="match-container">
                                <div class="question-list">
                                    <div class="match-item" data-question="1" onclick="selectVocabQuestion(1)" aria-label="選擇問題1">
                                        1. modern
                                    </div>
                                    <div class="match-item" data-question="2" onclick="selectVocabQuestion(2)" aria-label="選擇問題2">
                                        2. awesome
                                    </div>
                                    <div class="match-item" data-question="3" onclick="selectVocabQuestion(3)" aria-label="選擇問題3">
                                        3. pleasant
                                    </div>
                                </div>
                                
                                <div class="answer-list">
                                    <div class="match-item" data-answer="A" onclick="selectVocabAnswer('A')" aria-label="選擇答案A">
                                        A. nice, great
                                    </div>
                                    <div class="match-item" data-answer="B" onclick="selectVocabAnswer('B')" aria-label="選擇答案B">
                                        B. enjoyable, easy to like
                                    </div>
                                    <div class="match-item" data-answer="C" onclick="selectVocabAnswer('C')" aria-label="選擇答案C">
                                        C. new, up-to-date
                                    </div>
                                </div>
                            </div>
                            
                            <div class="feedback" id="vocabMatchingFeedback"></div>
                            
                            <button class="btn btn-check" onclick="checkVocabMatching()" aria-label="檢查詞彙匹配答案">
                                <i class="fas fa-check"></i> 檢查答案
                            </button>
                            <button class="btn btn-reset" onclick="resetVocabMatching()" aria-label="重設詞彙匹配">
                                <i class="fas fa-redo"></i> 重新開始
                            </button>
                        </div>
                        
                        <!-- 練習 3：閱讀理解選擇題 -->
                        <div class="activity-section">
                            <h4 class="activity-title">
                                <i class="fas fa-search"></i> 練習 3：閱讀理解選擇題
                            </h4>
                            <p>根據課文內容，選擇最佳答案：</p>
                            
                            <div class="question">
                                <h4>1. What kind of exhibition did the children visit?</h4>
                                <div class="options">
                                    <div class="option" data-question="r1" data-answer="a">A. A toy exhibition</div>
                                    <div class="option" data-question="r1" data-answer="b">B. An art exhibition</div>
                                    <div class="option" data-question="r1" data-answer="c">C. A gadget exhibition</div>
                                    <div class="option" data-question="r1" data-answer="d">D. A game exhibition</div>
                                </div>
                            </div>
                            
                            <div class="question">
                                <h4>2. Which of the following is true about Amy's grandma?</h4>
                                <div class="options">
                                    <div class="option" data-question="r2" data-answer="a">A. She doesn't like taking pictures.</div>
                                    <div class="option" data-question="r2" data-answer="b">B. She still uses her old camera.</div>
                                    <div class="option" data-question="r2" data-answer="c">C. She thinks digital cameras are better.</div>
                                    <div class="option" data-question="r2" data-answer="d">D. She bought a new camera from the museum.</div>
                                </div>
                            </div>
                            
                            <div class="question">
                                <h4>3. Why doesn't Andy's grandpa want to buy a new TV set?</h4>
                                <div class="options">
                                    <div class="option" data-question="r3" data-answer="a">A. The old TV set is cheap.</div>
                                    <div class="option" data-question="r3" data-answer="b">B. The old TV set has good picture quality.</div>
                                    <div class="option" data-question="r3" data-answer="c">C. The old TV set was a gift from his dad.</div>
                                    <div class="option" data-question="r3" data-answer="d">D. He doesn't like new gadgets.</div>
                                </div>
                            </div>
                            
                            <div class="question">
                                <h4>4. What does Ray think about old and new things?</h4>
                                <div class="options">
                                    <div class="option" data-question="r4" data-answer="a">A. Old things are worse than new ones.</div>
                                    <div class="option" data-question="r4" data-answer="b">B. New things are the best.</div>
                                    <div class="option" data-question="r4" data-answer="c">C. Both old and new things have their value.</div>
                                    <div class="option" data-question="r4" data-answer="d">D. He only likes modern gadgets.</div>
                                </div>
                            </div>
                            
                            <div class="question">
                                <h4>5. Which of the following is NOT a gadget mentioned in the text for taking pictures?</h4>
                                <div class="options">
                                    <div class="option" data-question="r5" data-answer="a">A. Film camera</div>
                                    <div class="option" data-question="r5" data-answer="b">B. Digital camera</div>
                                    <div class="option" data-question="r5" data-answer="c">C. Mobile phone</div>
                                    <div class="option" data-question="r5" data-answer="d">D. Typewriter</div>
                                </div>
                            </div>
                            
                            <div class="question">
                                <h4>6. What does Ray say about old and new things?</h4>
                                <div class="options">
                                    <div class="option" data-question="r6" data-answer="a">A. The newest things are the best.</div>
                                    <div class="option" data-question="r6" data-answer="b">B. Old machines are worse than new gadgets.</div>
                                    <div class="option" data-question="r6" data-answer="c">C. I like both the old things and the new things. The old things look nice and the new things look modern.</div>
                                    <div class="option" data-question="r6" data-answer="d">D. Old songs are more pleasant than new songs.</div>
                                </div>
                            </div>
                            
                            <div class="feedback" id="readingCompFeedback"></div>
                            
                            <button class="btn btn-check" onclick="checkReadingComp()" aria-label="檢查閱讀理解答案">
                                <i class="fas fa-check"></i> 檢查答案
                            </button>
                            <button class="btn btn-reset" onclick="resetReadingComp()" aria-label="重設閱讀理解">
                                <i class="fas fa-redo"></i> 重新開始
                            </button>
                        </div>
                        
                        <!-- 練習 4：閱讀理解問答題 -->
                        <div class="activity-section">
                            <h4 class="activity-title">
                                <i class="fas fa-question-circle"></i> 練習 4：閱讀理解問答題
                            </h4>
                            <p>根據課文內容，用完整的句子回答下列問題：</p>
                            
                            <div class="question">
                                <h4>1. Does Amy like the music her parents listen to? Why?</h4>
                                <input type="text" class="answer-input" id="q4-1-answer" placeholder="請輸入答案">
                                <div class="result" id="q4-1-result"></div>
                            </div>
                            
                            <div class="question">
                                <h4>2. What new gadget does Karen like? Why does she like it?</h4>
                                <input type="text" class="answer-input" id="q4-2-answer" placeholder="請輸入答案">
                                <div class="result" id="q4-2-result"></div>
                            </div>
                            
                            <div class="question">
                                <h4>3. Can people use both typewriters and computers to do the same thing? What is it?</h4>
                                <input type="text" class="answer-input" id="q4-3-answer" placeholder="請輸入答案">
                                <div class="result" id="q4-3-result"></div>
                            </div>
                            
                            <div class="question">
                                <h4>4. Why does Amy's grandma think her old camera is better than digital cameras?</h4>
                                <input type="text" class="answer-input" id="q4-4-answer" placeholder="請輸入答案">
                                <div class="result" id="q4-4-result"></div>
                            </div>
                            
                            <button class="btn btn-check" onclick="checkReadingQA()" aria-label="檢查閱讀問答答案">
                                <i class="fas fa-check"></i> 檢查答案
                            </button>
                            <button class="btn btn-reset" onclick="resetReadingQA()" aria-label="重設閱讀問答">
                                <i class="fas fa-redo"></i> 重新開始
                            </button>
                        </div>
                        
                        <!-- 練習 5：句型運用題 -->
                        <div class="activity-section">
                            <h4 class="activity-title">
                                <i class="fas fa-font"></i> 練習 5：句型運用題
                            </h4>
                            <p>用 "both ... and ..." 句型描述下列兩組 gadget 的共同用途，完成句子：</p>
                            
                            <div class="fill-blank-container">
                                <div class="fill-blank-item">
                                    <div class="blank-sentence">
                                        1. Record player and MP3 player: Both a record player and an MP3 player can be used to <input type="text" class="blank-input-large" id="sentence1" placeholder="輸入用途">.
                                    </div>
                                </div>
                                
                                <div class="fill-blank-item">
                                    <div class="blank-sentence">
                                        2. Typewriter and computer: Both a typewriter and a computer allow people to <input type="text" class="blank-input-large" id="sentence2" placeholder="輸入用途">.
                                    </div>
                                </div>
                                
                                <div class="fill-blank-item">
                                    <div class="blank-sentence">
                                        3. Film camera and digital camera: People can <input type="text" class="blank-input-large" id="sentence3" placeholder="輸入用途"> with both a film camera and a digital camera.
                                    </div>
                                </div>
                                
                                <div class="fill-blank-item">
                                    <div class="blank-sentence">
                                        4. Rotary telephone and mobile phone: We can <input type="text" class="blank-input-large" id="sentence4" placeholder="輸入用途"> using both a rotary telephone and a mobile phone.
                                    </div>
                                </div>
                            </div>
                            
                            <div class="feedback" id="sentencePatternFeedback"></div>
                            
                            <button class="btn btn-check" onclick="checkSentencePattern()" aria-label="檢查句型運用答案">
                                <i class="fas fa-check"></i> 檢查答案
                            </button>
                            <button class="btn btn-reset" onclick="resetSentencePattern()" aria-label="重設句型運用">
                                <i class="fas fa-redo"></i> 重新開始
                            </button>
                        </div>
                        
                        <!-- 練習 6：比較級與最高級運用題 -->
                        <div class="activity-section">
                            <h4 class="activity-title">
                                <i class="fas fa-signal"></i> 練習 6：比較級與最高級運用題
                            </h4>
                            <p>根據課文內容和表格信息，用形容詞的比較級 (Comparatives) 或最高級 (Superlatives) 完成句子：</p>
                            
                            <div style="background-color: #eef2f7; padding: 15px; border-radius: 10px; margin-bottom: 20px;">
                                <h5 style="color: #2980b9; margin-bottom: 10px;">Laptop Comparison Table</h5>
                                <table style="width: 100%; border-collapse: collapse;">
                                    <tr>
                                        <th style="padding: 8px; background-color: #3498db; color: white;">Model</th>
                                        <th style="padding: 8px; background-color: #3498db; color: white;">Hard Disk</th>
                                        <th style="padding: 8px; background-color: #3498db; color: white;">Battery Life</th>
                                    </tr>
                                    <tr>
                                        <td style="padding: 8px; border-bottom: 1px solid #ddd;">J-TEC</td>
                                        <td style="padding: 8px; border-bottom: 1px solid #ddd;">120 GB</td>
                                        <td style="padding: 8px; border-bottom: 1px solid #ddd;">3 hours</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 8px; border-bottom: 1px solid #ddd;">K-Star</td>
                                        <td style="padding: 8px; border-bottom: 1px solid #ddd;">150 GB</td>
                                        <td style="padding: 8px; border-bottom: 1px solid #ddd;">4 hours</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 8px;">PL3</td>
                                        <td style="padding: 8px;">200 GB</td>
                                        <td style="padding: 8px;">5 hours</td>
                                    </tr>
                                </table>
                            </div>
                            
                            <div class="fill-blank-container">
                                <div class="fill-blank-item">
                                    <div class="blank-sentence">
                                        1. Grandma's old camera is <input type="text" class="blank-input" id="comparative1" placeholder="輸入形容詞"> (good) than digital cameras in her opinion.
                                    </div>
                                </div>
                                
                                <div class="fill-blank-item">
                                    <div class="blank-sentence">
                                        2. Old machines are <input type="text" class="blank-input" id="comparative2" placeholder="輸入形容詞"> (bad) than new gadgets according to Karen.
                                    </div>
                                </div>
                                
                                <div class="fill-blank-item">
                                    <div class="blank-sentence">
                                        3. Andy's grandpa's TV set has <input type="text" class="blank-input" id="comparative3" placeholder="輸入形容詞"> (bad) picture quality in the whole building.
                                    </div>
                                </div>
                                
                                <div class="fill-blank-item">
                                    <div class="blank-sentence">
                                        4. Among J-TEC, K-Star and PL3 laptops, PL3 has <input type="text" class="blank-input" id="comparative4" placeholder="輸入形容詞"> (large) hard disk.
                                    </div>
                                </div>
                                
                                <div class="fill-blank-item">
                                    <div class="blank-sentence">
                                        5. K-Star's battery life is <input type="text" class="blank-input" id="comparative5" placeholder="輸入形容詞"> (long) than J-TEC's.
                                    </div>
                                </div>
                                
                                <div class="fill-blank-item">
                                    <div class="blank-sentence">
                                        6. I think the newest things are <input type="text" class="blank-input" id="comparative6" placeholder="輸入形容詞"> (good) of all.
                                    </div>
                                </div>
                            </div>
                            
                            <div class="feedback" id="comparativeFeedback"></div>
                            
                            <button class="btn btn-check" onclick="checkComparative()" aria-label="檢查比較級答案">
                                <i class="fas fa-check"></i> 檢查答案
                            </button>
                            <button class="btn btn-reset" onclick="resetComparative()" aria-label="重設比較級">
                                <i class="fas fa-redo"></i> 重新開始
                            </button>
                        </div>
                        
                        <!-- 練習 7：小組討論題 -->
                        <div class="activity-section">
                            <h4 class="activity-title">
                                <i class="fas fa-users"></i> 練習 7：小組討論題
                            </h4>
                            <p>和同學討論下列問題，用英文表達自己的觀點：</p>
                            
                            <div class="question">
                                <h4>1. What new gadget do you like best? Why?</h4>
                                <textarea class="answer-input" id="discussion1" placeholder="請輸入你的答案（至少2個理由）" rows="3"></textarea>
                                <div class="reference-answer" id="refAnswer1">
                                    <strong>參考答案：</strong> I like mobile phones best. First, I can use them to make phone calls with my family and friends easily. Second, I can play games and listen to music on them when I feel bored.<br>
                                    <strong>中文翻譯：</strong> 我最喜歡手機。首先，我可以輕鬆地用它和家人朋友打電話。其次，當我感到無聊時，我可以在上面玩遊戲和聽音樂。
                                </div>
                            </div>
                            
                            <div class="question">
                                <h4>2. Do you think old gadgets are still valuable? Why or why not?</h4>
                                <textarea class="answer-input" id="discussion2" placeholder="請輸入你的答案（至少2個理由）" rows="3"></textarea>
                                <div class="reference-answer" id="refAnswer2">
                                    <strong>正面參考答案：</strong> Yes, I think old gadgets are still valuable. Firstly, they have historical meaning and can help us learn about the past life. Secondly, some old gadgets are well-made and still work well, such as old record players.<br>
                                    <strong>正面中文翻譯：</strong> 是的，我認為舊的小工具仍然有價值。首先，它們具有歷史意義，可以幫助我們了解過去的生活。其次，一些舊的小工具製作精良，仍然運作良好，例如舊的唱片播放機。<br><br>
                                    <strong>反面參考答案：</strong> No, I don't think so. For one thing, old gadgets are not as convenient as new ones. For another, they usually have worse functions compared with new gadgets.<br>
                                    <strong>反面中文翻譯：</strong> 不，我不這麼認為。一方面，舊的小工具不如新的方便。另一方面，與新的小工具相比，它們的功能通常較差。
                                </div>
                            </div>
                            
                            <div class="question">
                                <h4>3. Among the three laptops (J-TEC, K-Star, PL3), which one do you think is the best? Give your reasons.</h4>
                                <textarea class="answer-input" id="discussion3" placeholder="請輸入你的答案（至少2個理由）" rows="3"></textarea>
                                <div class="reference-answer" id="refAnswer3">
                                    <strong>參考答案：</strong> I think PL3 is the best. First, it has the largest hard disk (200 GB) which can store more files. Second, it has the longest battery life (5 hours), so I can use it for a long time without charging.<br>
                                    <strong>中文翻譯：</strong> 我認為PL3是最好的。首先，它有最大的硬碟（200 GB），可以儲存更多文件。其次，它有最長的電池壽命（5小時），所以我可以長時間使用而不需要充電。
                                </div>
                            </div>
                            
                            <button class="btn btn-reference" onclick="showReferenceAnswers()" aria-label="顯示參考答案">
                                <i class="fas fa-lightbulb"></i> 參考答案
                            </button>
                            <button class="btn btn-reset" onclick="resetDiscussion()" aria-label="重設討論題">
                                <i class="fas fa-redo"></i> 重新開始
                            </button>
                        </div>
                        
                        <!-- 練習 8：科技產品分類拖拽 -->
                        <div class="activity-section">
                            <h4 class="activity-title">
                                <i class="fas fa-sort"></i> 練習 8：科技產品分類
                            </h4>
                            <p>將下方科技產品拖拽到正確的分類中：</p>
                            
                            <div class="drag-items-container" id="gadgetDragItems">
                                <div class="drag-item" data-gadget="digital camera" data-category="new">digital camera</div>
                                <div class="drag-item" data-gadget="mobile phone" data-category="new">mobile phone</div>
                                <div class="drag-item" data-gadget="computer" data-category="new">computer</div>
                                <div class="drag-item" data-gadget="typewriter" data-category="old">typewriter</div>
                                <div class="drag-item" data-gadget="record player" data-category="old">record player</div>
                                <div class="drag-item" data-gadget="film camera" data-category="old">film camera</div>
                                <div class="drag-item" data-gadget="MP3 player" data-category="new">MP3 player</div>
                                <div class="drag-item" data-gadget="rotary telephone" data-category="old">rotary telephone</div>
                            </div>
                            
                            <div class="drag-drop-area">
                                <div class="drop-zone" id="oldGadgetsZone">
                                    <div class="drop-zone-title">Old Gadgets (舊科技產品)</div>
                                    <div id="oldGadgetsItems"></div>
                                </div>
                                
                                <div class="drop-zone" id="newGadgetsZone">
                                    <div class="drop-zone-title">New Gadgets (新科技產品)</div>
                                    <div id="newGadgetsItems"></div>
                                </div>
                            </div>
                            
                            <div class="feedback" id="gadgetSortingFeedback"></div>
                            
                            <div style="display: flex; gap: 15px; margin-top: 20px;">
                                <button class="btn btn-check" onclick="checkGadgetSorting()" aria-label="檢查科技產品分類">
                                    <i class="fas fa-check"></i> 檢查答案
                                </button>
                                <button class="btn btn-undo" onclick="undoLastDrag()" aria-label="返回上一步">
                                    <i class="fas fa-undo"></i> 返回上一步
                                </button>
                                <button class="btn btn-reset" onclick="resetGadgetSorting()" aria-label="重設科技產品分類">
                                    <i class="fas fa-redo"></i> 重新開始
                                </button>
                            </div>
                        </div>
                        
                        <div class="progress-bar">
                            <div class="progress" id="practice-progress"></div>
                        </div>
                        <p id="progress-text" style="font-size: 1.2rem; font-weight: bold;">進度: 0/8 已完成</p>
                        <button class="btn btn-reset" onclick="resetPractice()" aria-label="重設所有練習"><i class="fas fa-redo"></i> 重設所有練習</button>
                        
                        <div id="completionMessage" class="badge" style="display: none; background-color: #27ae60; color: white; margin-top: 20px;">
                            <i class="fas fa-trophy"></i> 恭喜！已完成所有練習！
                        </div>
                    </div>
                    
                    <div class="tab-content" id="quiz">
                        <h3><i class="fas fa-clipboard-check"></i> 單元測驗</h3>
                        <div class="quiz-info">
                            測驗時長：10分鐘 滿分：15分
                        </div>
                        
                        <div class="quiz-container">
                            <!-- 事實與觀點辨識題 -->
                            <div class="quiz-section">
                                <h4 class="quiz-title">
                                    <i class="fas fa-check-circle"></i> 事實與觀點辨識題（每題 1 分）
                                </h4>
                                
                                <div class="question">
                                    <h4>1. "My grandma has an old camera." - Is this a fact or an opinion?</h4>
                                    <div class="options">
                                        <div class="option" data-quiz="1" data-answer="fact">A. Fact</div>
                                        <div class="option" data-quiz="1" data-answer="opinion">B. Opinion</div>
                                    </div>
                                </div>
                                
                                <div class="question">
                                    <h4>2. "New mobile phones are awesome." - Is this a fact or an opinion?</h4>
                                    <div class="options">
                                        <div class="option" data-quiz="2" data-answer="fact">A. Fact</div>
                                        <div class="option" data-quiz="2" data-answer="opinion">B. Opinion</div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- 詞彙匹配題 -->
                            <div class="quiz-section">
                                <h4 class="quiz-title">
                                    <i class="fas fa-link"></i> 詞彙匹配題（每題 1 分）
                                </h4>
                                <p>匹配單字與正確的釋義：</p>
                                
                                <div class="question">
                                    <h4>1. modern</h4>
                                    <div class="options">
                                        <div class="option" data-match="1" data-answer="a">A. nice, great</div>
                                        <div class="option" data-match="1" data-answer="b">B. enjoyable, easy to like</div>
                                        <div class="option" data-match="1" data-answer="c">C. new, up-to-date</div>
                                    </div>
                                </div>
                                
                                <div class="question">
                                    <h4>2. pleasant</h4>
                                    <div class="options">
                                        <div class="option" data-match="2" data-answer="a">A. nice, great</div>
                                        <div class="option" data-match="2" data-answer="b">B. enjoyable, easy to like</div>
                                        <div class="option" data-match="2" data-answer="c">C. new, up-to-date</div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- 閱讀理解選擇題 -->
                            <div class="quiz-section">
                                <h4 class="quiz-title">
                                    <i class="fas fa-book-reader"></i> 閱讀理解選擇題（每題 2 分）
                                </h4>
                                
                                <div class="question">
                                    <h4>1. Where did the children visit an exhibition?</h4>
                                    <div class="options">
                                        <div class="option" data-reading="1" data-answer="a">A. Hong Kong Art Museum</div>
                                        <div class="option" data-reading="1" data-answer="b">B. Hong Kong Science Museum</div>
                                        <div class="option" data-reading="1" data-answer="c">C. Hong Kong History Museum</div>
                                    </div>
                                </div>
                                
                                <div class="question">
                                    <h4>2. Why doesn't Andy's grandpa want a new TV set?</h4>
                                    <div class="options">
                                        <div class="option" data-reading="2" data-answer="a">A. It's too expensive</div>
                                        <div class="option" data-reading="2" data-answer="b">B. The old one was a gift from his dad</div>
                                        <div class="option" data-reading="2" data-answer="c">C. He doesn't watch TV</div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- 比較級填空題 -->
                            <div class="quiz-section">
                                <h4 class="quiz-title">
                                    <i class="fas fa-edit"></i> 比較級填空題（每題 2 分）
                                </h4>
                                <p>用正確的比較級或最高級形式填空：</p>
                                
<div class="fill-blank-container">
    <div class="fill-blank-item">
        <div class="blank-sentence">
            1. My new phone is <input type="text" class="blank-input" id="quizBlank1" style="width: 80px;"> (good) than my old one.
            <div class="result" id="quizBlank1-result" style="margin-top: 10px;"></div>
        </div>
    </div>
    
    <div class="fill-blank-item">
        <div class="blank-sentence">
            2. This laptop has <input type="text" class="blank-input" id="quizBlank2" style="width: 80px;"> (long) battery life in our class.
            <div class="result" id="quizBlank2-result" style="margin-top: 10px;"></div>
        </div>
    </div>
</div>


                            </div>
                            
                            <!-- 句型運用題 -->
                            <div class="quiz-section">
                                <h4 class="quiz-title">
                                    <i class="fas fa-pen"></i> 句型運用題（每題 3 分）
                                </h4>

<div class="question">
    <h4>用 "both ... and ..." 句型造一個句子：</h4>
    <input type="text" class="answer-input" id="sentenceAnswer" placeholder="請輸入句子">
    <div class="result" id="sentenceAnswer-result" style="margin-top: 10px;"></div>
</div>

                            </div>
                            
                            <button class="btn btn-check" id="submitQuiz" aria-label="提交測驗答案"><i class="fas fa-check-circle"></i> 提交測驗</button>
                            <button class="btn btn-reset" onclick="resetQuiz()" aria-label="重設測驗"><i class="fas fa-redo"></i> 重設測驗</button>
                        </div>
                    </div>
                    
                    <div class="tab-content" id="reading">
                        <h3><i class="fas fa-book-open"></i> 閱讀理解</h3>
                        <p>學習科技產品相關的英文詞彙和表達：</p>
                        
                        <div class="reading-sample">
                            <h4><i class="fas fa-laptop"></i> Gadgets in Our Life</h4>
                            
                            <div class="paragraph-container">
                                <div class="paragraph-content">
                                    <strong>The children visited an exhibition at the Hong Kong Science Museum last week.</strong> Read the pamphlet about the exhibition and what the children said.
                                </div>
                                <div class="paragraph-buttons">
                                    <button class="paragraph-btn audio-paragraph-btn" data-audio="gadgets_para_01" aria-label="播放第一段音頻">
                                        <i class="fas fa-volume-up"></i>
                                        <span class="audio-loading"></span>
                                    </button>
                                    <button class="paragraph-btn translate-btn" data-translation="t1" aria-label="顯示第一段翻譯">
                                        <i class="fas fa-language"></i>
                                    </button>
                                </div>
                                <div class="translation" id="t1">
                                    <strong>孩子們上週參觀了香港科學博物館的展覽。</strong> 閱讀關於展覽和孩子們所說的話的宣傳冊。
                                </div>
                            </div>
                            
                            <div class="paragraph-container">
                                <div class="paragraph-content">
                                    "I like both the old things and the new things. The old things look nice and the new things look modern," said Ray.
                                </div>
                                <div class="paragraph-buttons">
                                    <button class="paragraph-btn audio-paragraph-btn" data-audio="gadgets_para_02" aria-label="播放第二段音頻">
                                        <i class="fas fa-volume-up"></i>
                                        <span class="audio-loading"></span>
                                    </button>
                                    <button class="paragraph-btn translate-btn" data-translation="t2" aria-label="顯示第二段翻譯">
                                        <i class="fas fa-language"></i>
                                    </button>
                                </div>
                                <div class="translation" id="t2">
                                    "我既喜歡舊的東西也喜歡新的東西。舊的東西看起來很漂亮，新的東西看起來很現代，" Ray說。
                                </div>
                            </div>
                            
                            <div class="paragraph-container">
                                <div class="paragraph-content">
                                    "Oh really? I think the newest things are the best. Those new mobile phones are great," said Karen. "My dad's phone is like the blue one. It's awesome!"
                                </div>
                                <div class="paragraph-buttons">
                                    <button class="paragraph-btn audio-paragraph-btn" data-audio="gadgets_para_03" aria-label="播放第三段音頻">
                                        <i class="fas fa-volume-up"></i>
                                        <span class="audio-loading"></span>
                                    </button>
                                    <button class="paragraph-btn translate-btn" data-translation="t3" aria-label="顯示第三段翻譯">
                                        <i class="fas fa-language"></i>
                                    </button>
                                </div>
                                <div class="translation" id="t3">
                                    "哦，真的嗎？我認為最新的東西是最好的。那些新的手機很棒，" Karen說。"我爸爸的手機就像藍色的那個。它很厲害！"
                                </div>
                            </div>
                            
                            <div class="paragraph-container">
                                <div class="paragraph-content">
                                    "My grandma has an old camera. It's just like the one in the museum. She still uses it. She says her old camera is better than digital cameras because its pictures look nicer," said Amy.
                                </div>
                                <div class="paragraph-buttons">
                                    <button class="paragraph-btn audio-paragraph-btn" data-audio="gadgets_para_04" aria-label="播放第四段音頻">
                                        <i class="fas fa-volume-up"></i>
                                        <span class="audio-loading"></span>
                                    </button>
                                    <button class="paragraph-btn translate-btn" data-translation="t4" aria-label="顯示第四段翻譯">
                                        <i class="fas fa-language"></i>
                                    </button>
                                </div>
                                <div class="translation" id="t4">
                                    "我奶奶有一台舊相機。它就像博物館裡的那一台。她仍然在使用它。她說她的舊相機比數位相機更好，因為它的照片看起來更漂亮，" Amy說。
                                </div>
                            </div>
                            
                            <div class="paragraph-container">
                                <div class="paragraph-content">
                                    "Are you serious?" doubted Karen. "I think old machines are worse than new gadgets."
                                </div>
                                <div class="paragraph-buttons">
                                    <button class="paragraph-btn audio-paragraph-btn" data-audio="gadgets_para_05" aria-label="播放第五段音頻">
                                        <i class="fas fa-volume-up"></i>
                                        <span class="audio-loading"></span>
                                    </button>
                                    <button class="paragraph-btn translate-btn" data-translation="t5" aria-label="顯示第五段翻譯">
                                        <i class="fas fa-language"></i>
                                    </button>
                                </div>
                                <div class="translation" id="t5">
                                    "你是認真的嗎？" Karen懷疑地說。"我認為舊機器比新的小工具更差。"
                                </div>
                            </div>
                            
                            <div class="paragraph-container">
                                <div class="paragraph-content">
                                    "My grandpa doesn't think so! He doesn't want to buy a new TV set even though it has the worst picture quality in the whole building! It's all because the TV set was a gift from his dad," said Andy.
                                </div>
                                <div class="paragraph-buttons">
                                    <button class="paragraph-btn audio-paragraph-btn" data-audio="gadgets_para_06" aria-label="播放第六段音頻">
                                        <i class="fas fa-volume-up"></i>
                                        <span class="audio-loading"></span>
                                    </button>
                                    <button class="paragraph-btn translate-btn" data-translation="t6" aria-label="顯示第六段翻譯">
                                        <i class="fas fa-language"></i>
                                    </button>
                                </div>
                                <div class="translation" id="t6">
                                    "我爺爺不這麼認為！他不想買新的電視機，即使它在整棟大樓裡畫質最差！這完全是因為那台電視機是他爸爸送的禮物，" Andy說。
                                </div>
                            </div>
                            
                            <div class="paragraph-container">
                                <div class="paragraph-content">
                                    "Ha! Ha! Your grandpa is funny," Karen laughed. "I think those new computers look really good. I want one."
                                </div>
                                <div class="paragraph-buttons">
                                    <button class="paragraph-btn audio-paragraph-btn" data-audio="gadgets_para_07" aria-label="播放第七段音頻">
                                        <i class="fas fa-volume-up"></i>
                                        <span class="audio-loading"></span>
                                    </button>
                                    <button class="paragraph-btn translate-btn" data-translation="t7" aria-label="顯示第七段翻譯">
                                        <i class="fas fa-language"></i>
                                    </button>
                                </div>
                                <div class="translation" id="t7">
                                    "哈哈！你爺爺真有趣，" Karen笑道。"我認為那些新電腦看起來真的很好。我想要一台。"
                                </div>
                            </div>
                            
                            <div class="paragraph-container">
                                <div class="paragraph-content">
                                    "We can use both typewriters and computers to type letters and stories," said Ray.
                                </div>
                                <div class="paragraph-buttons">
                                    <button class="paragraph-btn audio-paragraph-btn" data-audio="gadgets_para_08" aria-label="播放第八段音頻">
                                        <i class="fas fa-volume-up"></i>
                                        <span class="audio-loading"></span>
                                    </button>
                                    <button class="paragraph-btn translate-btn" data-translation="t8" aria-label="顯示第八段翻譯">
                                        <i class="fas fa-language"></i>
                                    </button>
                                </div>
                                <div class="translation" id="t8">
                                    "我們既可以用打字機也可以用電腦來打信件和故事，" Ray說。
                                </div>
                            </div>
                            
                            <div class="paragraph-container">
                                <div class="paragraph-content">
                                    "That's true. And those old songs my grandparents listened to on the record player are actually quite pleasant to the ears. My parents always listen to that kind of music," said Amy.
                                </div>
                                <div class="paragraph-buttons">
                                    <button class="paragraph-btn audio-paragraph-btn" data-audio="gadgets_para_09" aria-label="播放第九段音頻">
                                        <i class="fas fa-volume-up"></i>
                                        <span class="audio-loading"></span>
                                    </button>
                                    <button class="paragraph-btn translate-btn" data-translation="t9" aria-label="顯示第九段翻譯">
                                        <i class="fas fa-language"></i>
                                    </button>
                                </div>
                                <div class="translation" id="t9">
                                    "那是真的。而且我祖父母在唱片播放機上聽的那些老歌實際上很悅耳。我父母總是聽那種音樂，" Amy說。
                                </div>
                            </div>
                            
                            <div class="paragraph-container">
                                <div class="paragraph-content">
                                    "I agree. That's why we shouldn't forget old things have their value, too!" said Ray.
                                </div>
                                <div class="paragraph-buttons">
                                    <button class="paragraph-btn audio-paragraph-btn" data-audio="gadgets_para_10" aria-label="播放第十段音頻">
                                        <i class="fas fa-volume-up"></i>
                                        <span class="audio-loading"></span>
                                    </button>
                                    <button class="paragraph-btn translate-btn" data-translation="t10" aria-label="顯示第十段翻譯">
                                        <i class="fas fa-language"></i>
                                    </button>
                                </div>
                                <div class="translation" id="t10">
                                    "我同意。這就是為什麼我們不應該忘記舊東西也有它們的價值！" Ray說。
                                </div>
                            </div>
                        </div>

<!-- 在現有的閱讀理解內容之後添加，例如在歌曲理解專區之前 -->
<div class="reading-sample" style="margin-top: 40px;">
    <h4><i class="fas fa-microphone-alt"></i> SAY IT RIGHT ("-tion")</h4>
    
    <div class="paragraph-container">
        <div class="paragraph-content">
            Let's see an exhibition during the vacation.
        </div>
        <div class="paragraph-buttons">
            <button class="paragraph-btn audio-paragraph-btn" data-audio="say_it_right_1" aria-label="播放第一句音頻">
                <i class="fas fa-volume-up"></i>
                <span class="audio-loading"></span>
            </button>
            <button class="paragraph-btn translate-btn" data-translation="sir1" aria-label="顯示第一句翻譯">
                <i class="fas fa-language"></i>
            </button>
        </div>
        <div class="translation" id="sir1">
            讓我們在假期期間去看展覽。
        </div>
    </div>
    
    <div class="paragraph-container">
        <div class="paragraph-content">
            In the gadget section,
        </div>
        <div class="paragraph-buttons">
            <button class="paragraph-btn audio-paragraph-btn" data-audio="say_it_right_2" aria-label="播放第二句音頻">
                <i class="fas fa-volume-up"></i>
                <span class="audio-loading"></span>
            </button>
            <button class="paragraph-btn translate-btn" data-translation="sir2" aria-label="顯示第二句翻譯">
                <i class="fas fa-language"></i>
            </button>
        </div>
        <div class="translation" id="sir2">
            在小工具區域，
        </div>
    </div>
    
    <div class="paragraph-container">
        <div class="paragraph-content">
            pay attention to the information.
        </div>
        <div class="paragraph-buttons">
            <button class="paragraph-btn audio-paragraph-btn" data-audio="say_it_right_3" aria-label="播放第三句音頻">
                <i class="fas fa-volume-up"></i>
                <span class="audio-loading"></span>
            </button>
            <button class="paragraph-btn translate-btn" data-translation="sir3" aria-label="顯示第三句翻譯">
                <i class="fas fa-language"></i>
            </button>
        </div>
        <div class="translation" id="sir3">
            注意查看信息。
        </div>
    </div>
    
    <div class="paragraph-container">
        <div class="paragraph-content">
            Each illustration comes with a caption.
        </div>
        <div class="paragraph-buttons">
            <button class="paragraph-btn audio-paragraph-btn" data-audio="say_it_right_4" aria-label="播放第四句音頻">
                <i class="fas fa-volume-up"></i>
                <span class="audio-loading"></span>
            </button>
            <button class="paragraph-btn translate-btn" data-translation="sir4" aria-label="顯示第四句翻譯">
                <i class="fas fa-language"></i>
            </button>
        </div>
        <div class="translation" id="sir4">
            每張插圖都配有說明文字。
        </div>
    </div>
    
    <div class="paragraph-container">
        <div class="paragraph-content">
            Wow! 'Fun station' is a fascinating invention.
        </div>
        <div class="paragraph-buttons">
            <button class="paragraph-btn audio-paragraph-btn" data-audio="say_it_right_5" aria-label="播放第五句音頻">
                <i class="fas fa-volume-up"></i>
                <span class="audio-loading"></span>
            </button>
            <button class="paragraph-btn translate-btn" data-translation="sir5" aria-label="顯示第五句翻譯">
                <i class="fas fa-language"></i>
            </button>
        </div>
        <div class="translation" id="sir5">
           <p>哇！'趣味站' 是一個迷人的發明。</p>
		<br><br>	        
          <p>說明：Fun Station 通常是互動式的娛樂 + 科普裝置; 特點是「有趣（Fun）」—— 比如可以讓人體驗趣味科學、遊戲化學習的設備（例如結合遊戲的科學實驗台、互動遊樂裝置等），既能帶來樂趣，也屬於創新的發明設計。</p>
        </div>
    </div>
</div>



                        
                        <!-- 歌曲理解專區 -->
                        <div class="song-container">
                            <div class="song-header">
                                <div class="song-title">Little Amy</div>
                                <button class="song-play-btn" onclick="playSong()" aria-label="播放歌曲">
                                    <i class="fas fa-play"></i> 播放歌曲
                                    <span class="audio-loading"></span>
                                </button>
                            </div>
                            
<div class="lyrics-container">
    <div class="lyric-line" onclick="showLyricExplanation(1)">
        <strong>Verse 1</strong><br>
        Amy Ho likes high-tech toys, doo-dah, doo-dah.<br>
        She plays them with girls and boys, h-de-doo-dah-day.<br>
        She plays games on her mobile phone, doo-dah, doo-dah.<br>
        She doesn't like to play alone, h-de-doo-dah-day.
    </div>
    <div class="lyric-explanation" id="explanation1">
        <strong>歌詞講解：</strong> 第一段歌詞介紹 Amy Ho 喜歡高科技玩具，和男孩女孩們一起玩。她在手機上玩遊戲，不喜歡獨自玩。doo-dah, doo-dah 是歌曲中的節奏襯詞。
    </div>
    
    <div class="lyric-line" onclick="showLyricExplanation(2)">
        <strong>Chorus</strong><br>
        She plays with her friends Ray, Mike and Kate.<br>
        They like playing video games together at weekends.
    </div>
    <div class="lyric-explanation" id="explanation2">
        <strong>歌詞講解：</strong> 副歌部分描述 Amy 和她的朋友們 Ray、Mike 和 Kate 一起玩，他們喜歡在週末一起玩電子遊戲。
    </div>
    
    <div class="lyric-line" onclick="showLyricExplanation(3)">
        <strong>Verse 2</strong><br>
        She showed Grandpa her MP3, doo-dah, doo-dah.<br>
        Her favourite song is Do-re-mi, oh-de-doo-dah-day.<br>
        Grandpa likes the record player, doo-dah, doo-dah.<br>
        Tech toys make his hair go greyer, oh-de-doo-dah-day.
    </div>
    <div class="lyric-explanation" id="explanation3">
        <strong>歌詞講解：</strong> 第二段歌詞對比了不同世代的科技產品。Amy 向爺爺展示她的 MP3 播放器（現代科技），而爺爺則喜歡唱片播放機（舊科技）。"Tech toys make his hair go greyer" 是一個幽默的說法，意思是這些科技玩具讓爺爺感到困惑或老化。
    </div>
    
    <div class="lyric-line" onclick="showLyricExplanation(4)">
        <strong>Chorus</strong><br>
        She plays with her friends Ray, Mike and Kate.<br>
        They like playing video games together at weekends.
    </div>
    <div class="lyric-explanation" id="explanation4">
        <strong>歌詞講解：</strong> 重複的副歌完整了歌曲結構，強調了歌曲的主題：科技玩具的樂趣和友誼。
    </div>
</div>                            
                            <!-- 歌曲理解問題 -->
                            <div class="activity-section" style="margin-top: 30px;">
                                <h4 class="activity-title">
                                    <i class="fas fa-music"></i> 歌曲理解題
                                </h4>
                                <p>根據歌曲歌詞，回答下列問題：</p>
                                
                                <div class="question">
                                    <h4>1. How many verses are there in the song?</h4>
                                    <input type="text" class="answer-input" id="songQ1" placeholder="請輸入答案">
                                    <div class="result" id="songQ1-result"></div>
                                </div>
                                
                                <div class="question">
                                    <h4>2. "Player" rhymes with "greyer". Find three more pairs of rhyming words in the lyrics.</h4>
                                    <input type="text" class="answer-input" id="songQ2" placeholder="例如：boys - joys">
                                    <div class="result" id="songQ2-result"></div>
                                </div>
                                
                                <div class="question">
                                    <h4>3. What does Amy like to play on her mobile phone?</h4>
                                    <input type="text" class="answer-input" id="songQ3" placeholder="請輸入答案">
                                    <div class="result" id="songQ3-result"></div>
                                </div>
                                
                                <div class="question">
                                    <h4>4. What does Grandpa like to use to listen to music?</h4>
                                    <input type="text" class="answer-input" id="songQ4" placeholder="請輸入答案">
                                    <div class="result" id="songQ4-result"></div>
                                </div>
                                
                                <button class="btn btn-check" onclick="checkSongQuestions()" aria-label="檢查歌曲理解答案">
                                    <i class="fas fa-check"></i> 檢查答案
                                </button>
                                <button class="btn btn-reset" onclick="resetSongQuestions()" aria-label="重設歌曲理解">
                                    <i class="fas fa-redo"></i> 重新開始
                                </button>
                            </div>
                        </div>
                        
                        <!-- 常用文法結構 -->
                        <div class="grammar-section">
                            <h4><i class="fas fa-font"></i> 常用文法結構</h4>
                            <div class="grammar-grid">
                                <!-- 文法 1 -->
                                <div class="grammar-card">
                                    <div class="grammar-item">Both...and...</div>
                                    <button class="example-btn" aria-label="顯示Both...and...例句">
                                        <i class="fas fa-comment-dots"></i> 例句
                                    </button>
                                    <div class="example-content">
                                        <p class="example-english">I like both the old things and the new things.</p>
                                        <p class="example-chinese">我既喜歡舊的東西也喜歡新的東西。</p>
                                        <p class="example-english">We can use both typewriters and computers to type letters.</p>
                                        <p class="example-chinese">我們既可以用打字機也可以用電腦來打信件。</p>
                                        <button class="audio-example-btn" data-audio="grammar_both" aria-label="播放Both...and...例句音頻">
                                            <i class="fas fa-volume-up"></i> 
                                        </button>
                                    </div>
                                </div>
                                
                                <!-- 文法 2 -->
                                <div class="grammar-card">
                                    <div class="grammar-item">Comparatives (比較級)</div>
                                    <button class="example-btn" aria-label="顯示比較級例句">
                                        <i class="fas fa-comment-dots"></i> 例句
                                    </button>
                                    <div class="example-content">
                                        <p class="example-english">Her old camera is better than digital cameras.</p>
                                        <p class="example-chinese">她的舊相機比數位相機更好。</p>
                                        <p class="example-english">Old machines are worse than new gadgets.</p>
                                        <p class="example-chinese">舊機器比新的小工具更差。</p>
                                        <button class="audio-example-btn" data-audio="grammar_comparative" aria-label="播放比較級例句音頻">
                                            <i class="fas fa-volume-up"></i> 
                                        </button>
                                    </div>
                                </div>
                                
                                <!-- 文法 3 -->
                                <div class="grammar-card">
                                    <div class="grammar-item">Superlatives (最高級)</div>
                                    <button class="example-btn" aria-label="顯示最高級例句">
                                        <i class="fas fa-comment-dots"></i> 例句
                                    </button>
                                    <div class="example-content">
                                        <p class="example-english">It has the worst picture quality in the whole building.</p>
                                        <p class="example-chinese">它在整棟大樓裡畫質最差。</p>
                                        <p class="example-english">I think the newest things are the best.</p>
                                        <p class="example-chinese">我認為最新的東西是最好的。</p>
                                        <button class="audio-example-btn" data-audio="grammar_superlative" aria-label="播放最高級例句音頻">
                                            <i class="fas fa-volume-up"></i> 
                                        </button>
                                    </div>
                                </div>
                                
                                <!-- 文法 4 -->
                                <div class="grammar-card">
                                    <div class="grammar-item">Fact vs Opinion</div>
                                    <button class="example-btn" aria-label="顯示事實與觀點例句">
                                        <i class="fas fa-comment-dots"></i> 例句
                                    </button>
                                    <div class="example-content">
                                        <p class="example-english">Fact: Amy visited the Science Museum.</p>
                                        <p class="example-chinese">事實：Amy參觀了科學博物館。</p>
                                        <p class="example-english">Opinion: New mobile phones are awesome.</p>
                                        <p class="example-chinese">觀點：新的手機很厲害。</p>
                                        <button class="audio-example-btn" data-audio="grammar_fact_opinion" aria-label="播放事實與觀點例句音頻">
                                            <i class="fas fa-volume-up"></i> 
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="sidebar">
                <h2><i class="fas fa-list"></i> 學習重點</h2>
                <div class="unit">
                    <h3><i class="fas fa-microchip"></i> 單元5：生活中的科技產品</h3>
                    <div class="unit-content">
                        <p><strong>主題：</strong> 科技產品與時代變遷</p>
                        <p><strong>學習目標：</strong></p>
                        <ul>
                            <li>學習科技產品相關詞彙</li>
                            <li>區分事實（Fact）與觀點（Opinion）</li>
                            <li>使用比較級和最高級描述科技產品</li>
                            <li>運用"both...and..."句型表達共同點</li>
                            <li>討論新舊科技產品的價值</li>
                        </ul>
                    </div>
                </div>
                
                <div class="unit">
                    <h3><i class="fas fa-language"></i> 語言重點</h3>
                    <div class="unit-content">
                        <p><strong>1. 科技產品詞彙：</strong></p>
                        <ul>
                            <li>digital camera, mobile phone, computer</li>
                            <li>TV set, typewriter, record player</li>
                            <li>film camera, MP3 player, rotary telephone</li>
                        </ul>
                        
                        <p><strong>2. 形容詞：</strong></p>
                        <ul>
                            <li>modern, awesome, pleasant</li>
                            <li>new, old, high-tech</li>
                        </ul>
                        
                        <p><strong>3. 比較級與最高級：</strong></p>
                        <ul>
                            <li>better - worse</li>
                            <li>the best - the worst</li>
                            <li>longer - the longest</li>
                            <li>larger - the largest</li>
                        </ul>
                        
                        <p><strong>4. 句型結構：</strong></p>
                        <ul>
                            <li>Both...and...（既...又...）</li>
                            <li>Fact vs Opinion（事實與觀點）</li>
                        </ul>
                    </div>
                </div>
                
                <!-- 學習進度 -->
                <div class="progress-summary">
                    <h3><i class="fas fa-chart-line"></i> 學習進度</h3>
                    <div class="progress-circle" id="progressCircle">
                        <div class="progress-circle-inner">
                            <span id="progressPercent">0%</span>
                        </div>
                    </div>
                    <div class="practice-stats">
                        <div class="stat-item">
                            <div class="stat-value" id="completedCount">0</div>
                            <div class="stat-label">已完成</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value" id="totalCount">8</div>
                            <div class="stat-label">總練習</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value" id="correctRate">0%</div>
                            <div class="stat-label">正確率</div>
                        </div>
                    </div>
                    <p id="nextRecommendation" style="margin-top: 15px; color: #666; font-size: 0.9rem;">
                        開始練習以追蹤進度
                    </p>
                </div>
                
                <div class="score-container" id="scoreContainer">
                    <h3><i class="fas fa-award"></i> 測驗結果</h3>
                    <div class="score" id="score">0/20</div>
                    <p id="scoreMessage">測驗完成！請查看你的分數。</p>
                    <button class="btn btn-reset" id="resetTest" aria-label="重新開始測驗"><i class="fas fa-redo"></i> 重新測驗</button>
                </div>
                
                <!-- 薄弱環節提示 -->
                <div class="unit" id="weaknessTips" style="display: none;">
                    <h3><i class="fas fa-lightbulb"></i> 學習建議</h3>
                    <div class="unit-content">
                        <p><strong>建議加強練習：</strong></p>
                        <ul id="weaknessList">
                            <!-- 將由JavaScript動態生成 -->
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        
        <footer>
            <p>小學四年級英文 - 單元5：生活中的科技產品 | 設計參考自教學內容 | &copy; 2023 教育資源</p>
            <p>使用提示：點擊詞彙卡學習單字和例句，完成練習題強化記憶，聆聽音頻學習正確發音</p>
            <p>進度會自動保存，下次訪問可繼續學習</p>
        </footer>
    </div>

    <!-- 完成總結彈窗 -->
    <div class="summary-modal" id="summaryModal">
        <div class="summary-content">
            <div class="summary-header">
                <h2><i class="fas fa-trophy"></i> 恭喜完成單元學習！</h2>
                <div class="summary-stars" id="summaryStars">
                    <!-- 星星將由JavaScript生成 -->
                </div>
                <p>你已完成所有練習題</p>
            </div>
            
            <div class="progress-summary" style="margin: 20px 0;">
                <h3>學習成果總結</h3>
                <div class="progress-circle" style="width: 100px; height: 100px;">
                    <div class="progress-circle-inner">
                        <span id="finalProgress">0%</span>
                    </div>
                </div>
                <p>已完成 <strong id="finalCompleted">0</strong>/<strong>8</strong> 個練習</p>
            </div>
            
            <div id="weaknessSection" style="display: none;">
                <h3><i class="fas fa-exclamation-triangle"></i> 建議加強練習</h3>
                <div class="weakness-list" id="modalWeaknessList">
                    <!-- 薄弱環節將由JavaScript生成 -->
                </div>
            </div>
            
            <div style="text-align: center; margin-top: 30px;">
                <button class="btn" onclick="closeSummary()" style="background-color: #3498db;">
                    <i class="fas fa-check"></i> 確認
                </button>
                <button class="btn btn-reset" onclick="resetPracticeWithSilentNotification()" style="margin-left: 15px;">
                    <i class="fas fa-redo"></i> 重新練習
                </button>
            </div>
        </div>
    </div>

    <!-- 靜默通知 -->
    <div class="silent-notification" id="silentNotification">
        <div id="notificationContent"></div>
    </div>

    <!-- 音頻播放器 -->
    <audio id="audioPlayer" class="audio-player"></audio>

    <script>
        // ==================== 全局變數 ====================
        let currentPage = 1;
        const totalPages = 3;
        
        // 練習題答案
        const answers = {
            // 練習4：閱讀理解問答題
            "q4-1": {type: "sentence", answer: "Yes, she does. Because the old songs her parents listen to are quite pleasant to the ears.", variations: ["Yes, she does because the old songs are pleasant to the ears."]},
            "q4-2": {type: "sentence", answer: "She likes new mobile phones. Because she thinks they are great and awesome.", variations: ["She likes new mobile phones because they are great and awesome."]},
            "q4-3": {type: "sentence", answer: "Yes, they can. They can type letters and stories.", variations: ["Yes, they can type letters and stories."]},
            "q4-4": {type: "sentence", answer: "Because its pictures look nicer.", variations: ["Because the pictures look nicer."]},
            
            // 練習5：句型運用題
            "sentence1": {type: "word", answer: "listen to music"},
            "sentence2": {type: "word", answer: "type letters and stories"},
            "sentence3": {type: "word", answer: "take pictures"},
            "sentence4": {type: "word", answer: "make phone calls"},
            
            // 練習6：比較級與最高級
            "comparative1": {type: "word", answer: "better"},
            "comparative2": {type: "word", answer: "worse"},
            "comparative3": {type: "word", answer: "the worst"},
            "comparative4": {type: "word", answer: "the largest"},
            "comparative5": {type: "word", answer: "longer"},
            "comparative6": {type: "word", answer: "the best"},
            
            // 歌曲理解題
            "songQ1": {type: "sentence", answer: "There are two verses in the song.", variations: ["Two.", "2 verses."]},
            "songQ2": {type: "word", answer: "boys - joys, phone - alone, Kate - great", variations: ["toys-boys", "player-greyer"]},
            "songQ3": {type: "sentence", answer: "She likes to play games on her mobile phone.", variations: ["Games.", "She plays games."]},
            "songQ4": {type: "sentence", answer: "He likes to use a record player to listen to music.", variations: ["A record player.", "Record player."]}
        };
        
        // 活動練習答案
        const factOpinionAnswers = {
            "1": "fact",
            "2": "opinion", 
            "3": "fact",
            "4": "fact",
            "5": "opinion"
        };
        
        const vocabMatchingAnswers = {
            "1": "C",
            "2": "A", 
            "3": "B"
        };
        
        const readingCompAnswers = {
            "r1": "c",
            "r2": "b",
            "r3": "c",
            "r4": "c",
            "r5": "d",
            "r6": "c"
        };
        
        // 科技產品分類答案
        const gadgetCategories = {
            "digital camera": "new",
            "mobile phone": "new",
            "computer": "new",
            "typewriter": "old",
            "record player": "old",
            "film camera": "old",
            "MP3 player": "new",
            "rotary telephone": "old"
        };
        
        // 測驗題正確答案
        const quizAnswers = {
            "1": "fact",
            "2": "opinion",
            "match1": "c",
            "match2": "b",
            "quizBlank1": "better",
            "quizBlank2": "the longest",
            "reading1": "b",
            "reading2": "b",
            "sentenceAnswer": "I like both apples and oranges." // 範例答案
        };
        
        // 學習進度管理
        let completedPractice = 0;
        const totalPracticeQuestions = 8;
        let correctAnswers = 0;
        let practiceScores = {};
        
        // 音頻管理
        let currentAudio = null;
        
        // 學習數據存儲
        const STORAGE_KEY = 'unit5_gadgets_progress';
        
        // 拖拽歷史記錄
        let dragHistory = [];
        
        // ==================== 初始化功能 ====================
        document.addEventListener('DOMContentLoaded', function() {
            // 載入保存的學習進度
            loadProgress();
            
            // 初始化分頁
            showPage(1);
            
            // 分頁按鈕事件
            document.getElementById('prevPage').addEventListener('click', function() {
                if (currentPage > 1) showPage(currentPage - 1);
            });
            
            document.getElementById('nextPage').addEventListener('click', function() {
                if (currentPage < totalPages) showPage(currentPage + 1);
            });
            
            // 分頁切換功能
            const tabs = document.querySelectorAll('.tab');
            const tabContents = document.querySelectorAll('.tab-content');
            
            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    const targetTab = tab.getAttribute('data-tab');
                    
                    // 更新分頁狀態
                    tabs.forEach(t => t.classList.remove('active'));
                    tabContents.forEach(c => c.classList.remove('active'));
                    
                    tab.classList.add('active');
                    document.getElementById(targetTab).classList.add('active');
                    
                    // 如果切換到測驗分頁，重置測驗狀態
                    if(targetTab === 'quiz') {
                        resetQuiz();
                    }
                    
                    // 保存當前分頁
                    saveProgress();
                });
            });
            
            // 詞彙卡翻轉功能
            const flashcards = document.querySelectorAll('.flashcard');
            flashcards.forEach(card => {
                card.addEventListener('click', function() {
                    this.classList.toggle('flipped');
                });
            });
            
            // 選擇題功能
            const options = document.querySelectorAll('.option[data-answer], .option[data-question], .option[data-quiz], .option[data-match], .option[data-reading]');
            options.forEach(option => {
                option.addEventListener('click', function() {
                    handleOptionClick(this);
                });
                
                // 鍵盤導航支持
                option.addEventListener('keydown', function(e) {
                    if (e.key === 'Enter' || e.key === ' ') {
                        e.preventDefault();
                        handleOptionClick(this);
                    }
                });
            });
            
            // 提交測驗
            document.getElementById('submitQuiz').addEventListener('click', submitQuiz);
            
            // 重置測驗按鈕
            document.getElementById('resetTest').addEventListener('click', resetQuiz);
            
            // 音頻按鈕功能
            initializeAudioButtons();
            
            // 拖拽功能初始化
            initializeDragAndDrop();
            
            // 例句展開/收起功能
            document.querySelectorAll('.example-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    toggleExampleContent(this);
                });
            });
            
            // 翻譯按鈕功能
            document.querySelectorAll('.translate-btn').forEach(button => {
                button.addEventListener('click', function(e) {
                    e.stopPropagation();
                    const translationId = this.getAttribute('data-translation');
                    toggleTranslation(translationId);
                });
            });
            
            // 歌詞點擊解釋功能
            document.querySelectorAll('.lyric-line').forEach(line => {
                line.addEventListener('click', function() {
                    const allLines = document.querySelectorAll('.lyric-line');
                    allLines.forEach(l => l.classList.remove('selected'));
                    this.classList.add('selected');
                });
            });
            
            // 更新進度顯示
            updateProgressDisplay();
        });
        
        // ==================== 分頁控制 ====================
        function showPage(pageNum) {
            // 隱藏所有頁面
            for (let i = 1; i <= totalPages; i++) {
                const pageElement = document.getElementById(`page${i}`);
                if (pageElement) pageElement.style.display = 'none';
            }
            
            // 顯示當前頁面
            const currentPageElement = document.getElementById(`page${pageNum}`);
            if (currentPageElement) currentPageElement.style.display = 'grid';
            
            // 更新頁面指示器
            document.getElementById('pageIndicator').textContent = `第 ${pageNum} 頁 / 共 ${totalPages} 頁`;
            
            // 更新按鈕狀態
            document.getElementById('prevPage').disabled = pageNum === 1;
            document.getElementById('nextPage').disabled = pageNum === totalPages;
            
            currentPage = pageNum;
        }
        
        // ==================== 學習進度管理 ====================
        function loadProgress() {
            const saved = localStorage.getItem(STORAGE_KEY);
            if (saved) {
                try {
                    const progress = JSON.parse(saved);
                    completedPractice = progress.completed || 0;
                    correctAnswers = progress.correct || 0;
                    practiceScores = progress.scores || {};
                } catch (e) {
                    // 解析失敗，重新開始
                }
            }
        }
        
        function saveProgress() {
            const progress = {
                completed: completedPractice,
                correct: correctAnswers,
                scores: practiceScores,
                timestamp: new Date().getTime()
            };
            
            localStorage.setItem(STORAGE_KEY, JSON.stringify(progress));
        }
        
        function updateProgressDisplay() {
            const progressPercent = Math.round((completedPractice / totalPracticeQuestions) * 100);
            const correctRate = completedPractice > 0 ? Math.round((correctAnswers / completedPractice) * 100) : 0;
            
            // 更新進度圓環
            document.getElementById('progressPercent').textContent = `${progressPercent}%`;
            const progressCircle = document.getElementById('progressCircle');
            progressCircle.style.background = `conic-gradient(#3498db 0% ${progressPercent}%, #eef2f7 ${progressPercent}% 100%)`;
            
            // 更新統計數字
            document.getElementById('completedCount').textContent = completedPractice;
            document.getElementById('totalCount').textContent = totalPracticeQuestions;
            document.getElementById('correctRate').textContent = `${correctRate}%`;
            
            // 更新進度條
            const progressBar = document.getElementById('practice-progress');
            if (progressBar) {
                progressBar.style.width = `${progressPercent}%`;
            }
            
            // 更新進度文字
            const progressText = document.getElementById('progress-text');
            if (progressText) {
                progressText.textContent = `進度: ${completedPractice}/${totalPracticeQuestions} 已完成`;
            }
            
            // 更新建議
            const nextRecommendation = document.getElementById('nextRecommendation');
            if (nextRecommendation) {
                if (completedPractice === 0) {
                    nextRecommendation.textContent = '開始練習以追蹤進度';
                } else if (completedPractice < totalPracticeQuestions) {
                    nextRecommendation.textContent = '繼續完成所有練習';
                } else {
                    nextRecommendation.textContent = '太棒了！已完成所有練習';
                    document.getElementById('completionMessage').style.display = 'inline-block';
                }
            }
            
            // 保存進度
            saveProgress();
            
            // 如果完成所有練習，顯示總結
            if (completedPractice === totalPracticeQuestions) {
                setTimeout(() => {
                    showSummary();
                }, 500);
            }
        }
        
        // ==================== 音頻管理 ====================
        function stopCurrentAudio() {
            if (currentAudio) {
                currentAudio.pause();
                currentAudio.currentTime = 0;
            }
        }
        
        function initializeAudioButtons() {
            // 詞彙音頻按鈕
            const audioButtons = document.querySelectorAll('.audio-btn');
            audioButtons.forEach(button => {
                button.addEventListener('click', function(e) {
                    e.stopPropagation();
                    const audioType = this.getAttribute('data-audio');
                    playAudio(audioType, this);
                });
            });
            
            // 例句音頻按鈕
            const exampleAudioButtons = document.querySelectorAll('.example-audio-btn');
            exampleAudioButtons.forEach(button => {
                button.addEventListener('click', function(e) {
                    e.stopPropagation();
                    const audioType = this.getAttribute('data-audio');
                    playAudio(audioType, this);
                });
            });
            
            // 段落音頻按鈕
            const paragraphAudioButtons = document.querySelectorAll('.audio-paragraph-btn');
            paragraphAudioButtons.forEach(button => {
                button.addEventListener('click', function(e) {
                    e.stopPropagation();
                    const audioFile = this.getAttribute('data-audio');
                    playAudio(audioFile, this);
                });
            });

    // 文法結構卡片的音頻按鈕
    const grammarAudioButtons = document.querySelectorAll('.audio-example-btn');
    grammarAudioButtons.forEach(button => {
        button.addEventListener('click', function(e) {
            e.stopPropagation();
            const audioType = this.getAttribute('data-audio');
            playAudio(audioType, this);
        });
    });


        }
        
        function playAudio(audioType, button) {
            // 停止當前播放的音頻
            stopCurrentAudio();
            
            const audioFile = audioType.replace(/ /g, '_');
            const audioUrl = `./audio/${audioFile}.mp3`;
            
            currentAudio = new Audio(audioUrl);
            
            if (button) {
                button.classList.add('loading');
            }
            
            currentAudio.play().then(() => {
                if (button) {
                    setTimeout(() => {
                        button.classList.remove('loading');
                    }, 500);
                }
                
                // 音頻播放結束後釋放資源
                currentAudio.onended = function() {
                    currentAudio = null;
                };
            }).catch(e => {
                if (button) {
                    button.classList.remove('loading');
                }
                showSilentNotification('音頻文件未找到，請檢查audio資料夾');
            });
        }
        
        function playSong() {
            const button = document.querySelector('.song-play-btn');
            stopCurrentAudio();
            
            const audioUrl = './audio/little_amy.mp3';
            currentAudio = new Audio(audioUrl);
            
            button.classList.add('loading');
            
            currentAudio.play().then(() => {
                setTimeout(() => {
                    button.classList.remove('loading');
                    button.innerHTML = '<i class="fas fa-pause"></i> 暫停歌曲';
                    button.onclick = pauseSong;
                }, 500);
                
                currentAudio.onended = function() {
                    currentAudio = null;
                    button.innerHTML = '<i class="fas fa-play"></i> 播放歌曲';
                    button.onclick = playSong;
                };
            }).catch(e => {
                button.classList.remove('loading');
                showSilentNotification('歌曲文件未找到，請檢查audio資料夾');
            });
        }
        
        function pauseSong() {
            const button = document.querySelector('.song-play-btn');
            if (currentAudio) {
                currentAudio.pause();
                button.innerHTML = '<i class="fas fa-play"></i> 播放歌曲';
                button.onclick = playSong;
            }
        }
        
        // ==================== 答案檢查通用函數 ====================
        function markElementCorrect(element) {
            if (!element) return;
            element.classList.remove('incorrect-answer');
            element.classList.add('correct-answer');
            
            if (element.tagName === 'INPUT' || element.tagName === 'TEXTAREA') {
                element.style.borderColor = '#2ecc71';
                element.style.backgroundColor = '#d5f4e6';
            }
        }
        
        function markElementIncorrect(element) {
            if (!element) return;
            element.classList.remove('correct-answer');
            element.classList.add('incorrect-answer');
            
            if (element.tagName === 'INPUT' || element.tagName === 'TEXTAREA') {
                element.style.borderColor = '#e74c3c';
                element.style.backgroundColor = '#fce4ec';
            }
        }
        
        function clearElementMark(element) {
            if (!element) return;
            element.classList.remove('correct-answer', 'incorrect-answer');
            
            if (element.tagName === 'INPUT' || element.tagName === 'TEXTAREA') {
                element.style.borderColor = '#ddd';
                element.style.backgroundColor = 'white';
            } else {
                element.style.backgroundColor = '';
                element.style.borderColor = '';
            }
        }
        
        // ==================== 練習題答案檢查 ====================
        
        // 練習1：事實與觀點辨析題
        function selectFactOpinion(questionNum, type) {
            const factCheckbox = document.querySelector(`.checkbox-option[data-question="${questionNum}"][data-type="fact"]`);
            const opinionCheckbox = document.querySelector(`.checkbox-option[data-question="${questionNum}"][data-type="opinion"]`);
            
            // 清除兩個選項的選中狀態
            factCheckbox.classList.remove('selected');
            opinionCheckbox.classList.remove('selected');
            
            // 選中點擊的選項
            if (type === 'fact') {
                factCheckbox.classList.add('selected');
            } else {
                opinionCheckbox.classList.add('selected');
            }
        }
        
        function checkFactOpinion() {
            const feedback = document.getElementById('factOpinionFeedback');
            let correctCount = 0;
            let answeredCount = 0;
            
            for (let i = 1; i <= 5; i++) {
                const factCheckbox = document.querySelector(`.checkbox-option[data-question="${i}"][data-type="fact"]`);
                const opinionCheckbox = document.querySelector(`.checkbox-option[data-question="${i}"][data-type="opinion"]`);
                
                // 檢查是否有選中
                const isFactSelected = factCheckbox.classList.contains('selected');
                const isOpinionSelected = opinionCheckbox.classList.contains('selected');
                
                if (isFactSelected || isOpinionSelected) {
                    answeredCount++;
                    
                    // 清除之前的標記
                    clearElementMark(factCheckbox);
                    clearElementMark(opinionCheckbox);
                    
                    const correctAnswer = factOpinionAnswers[i];
                    const isCorrect = (correctAnswer === 'fact' && isFactSelected) || 
                                     (correctAnswer === 'opinion' && isOpinionSelected);
                    
                    if (isCorrect) {
                        if (correctAnswer === 'fact') {
                            markElementCorrect(factCheckbox);
                        } else {
                            markElementCorrect(opinionCheckbox);
                        }
                        correctCount++;
                    } else {
                        if (isFactSelected) {
                            markElementIncorrect(factCheckbox);
                        } else {
                            markElementIncorrect(opinionCheckbox);
                        }
                        
                        // 顯示正確答案
                        if (correctAnswer === 'fact') {
                            markElementCorrect(factCheckbox);
                        } else {
                            markElementCorrect(opinionCheckbox);
                        }
                    }
                }
            }
            
            feedback.style.display = 'block';
            
            if (answeredCount === 0) {
                feedback.className = 'feedback incorrect';
                feedback.innerHTML = '❌ 請先選擇答案！';
            } else if (answeredCount < 5) {
                feedback.className = 'feedback incorrect';
                feedback.innerHTML = `❌ 還有 ${5 - answeredCount} 題未回答`;
            } else if (correctCount === 5) {
                feedback.className = 'feedback correct';
                feedback.innerHTML = '✅ 太棒了！全部正確！';
                
                // 更新進度
                if (!practiceScores.factOpinion) {
                    completedPractice++;
                    correctAnswers++;
                    practiceScores.factOpinion = 1;
                    updateProgressDisplay();
                }
            } else {
                feedback.className = 'feedback incorrect';
                feedback.innerHTML = `❌ 正確: ${correctCount}/5`;
            }
        }
        
        function resetFactOpinion() {
            for (let i = 1; i <= 5; i++) {
                const factCheckbox = document.querySelector(`.checkbox-option[data-question="${i}"][data-type="fact"]`);
                const opinionCheckbox = document.querySelector(`.checkbox-option[data-question="${i}"][data-type="opinion"]`);
                
                factCheckbox.classList.remove('selected', 'correct-answer', 'incorrect-answer');
                opinionCheckbox.classList.remove('selected', 'correct-answer', 'incorrect-answer');
            }
            
            const feedback = document.getElementById('factOpinionFeedback');
            feedback.style.display = 'none';
            
            // 移除進度
            if (practiceScores.factOpinion) {
                completedPractice--;
                correctAnswers--;
                delete practiceScores.factOpinion;
                updateProgressDisplay();
            }
        }
        
        // 練習2：詞彙匹配題
        let selectedVocabQuestion = null;
        let selectedVocabAnswer = null;
        
        function selectVocabQuestion(questionNum) {
            selectedVocabQuestion = questionNum;
            const questionItems = document.querySelectorAll('.question-list .match-item');
            questionItems.forEach(item => {
                item.classList.remove('selected');
                item.style.borderColor = 'transparent';
            });
            
            const selectedItem = document.querySelector(`.match-item[data-question="${questionNum}"]`);
            selectedItem.classList.add('selected');
            selectedItem.style.borderColor = '#2980b9';
            
            if (selectedVocabAnswer) checkSingleVocabMatch();
        }
        
        function selectVocabAnswer(answerLetter) {
            selectedVocabAnswer = answerLetter;
            const answerItems = document.querySelectorAll('.answer-list .match-item');
            answerItems.forEach(item => {
                item.classList.remove('selected');
                item.style.borderColor = 'transparent';
            });
            
            const selectedItem = document.querySelector(`.match-item[data-answer="${answerLetter}"]`);
            selectedItem.classList.add('selected');
            selectedItem.style.borderColor = '#2980b9';
            
            if (selectedVocabQuestion) checkSingleVocabMatch();
        }
        
        function checkSingleVocabMatch() {
            if (selectedVocabQuestion && selectedVocabAnswer) {
                const questionItem = document.querySelector(`.match-item[data-question="${selectedVocabQuestion}"]`);
                const answerItem = document.querySelector(`.match-item[data-answer="${selectedVocabAnswer}"]`);
                
                clearElementMark(questionItem);
                clearElementMark(answerItem);
                
                if (vocabMatchingAnswers[selectedVocabQuestion] === selectedVocabAnswer) {
                    markElementCorrect(questionItem);
                    markElementCorrect(answerItem);
                    questionItem.classList.add('matched');
                    answerItem.classList.add('matched');
                    
                    // 更新進度
                    if (!practiceScores[`vocabMatch${selectedVocabQuestion}`]) {
                        practiceScores[`vocabMatch${selectedVocabQuestion}`] = 1;
                    }
                } else {
                    markElementIncorrect(questionItem);
                    markElementIncorrect(answerItem);
                }
                
                selectedVocabQuestion = null;
                selectedVocabAnswer = null;
                
                // 檢查是否完成所有配對
                checkVocabMatchingProgress();
            }
        }
        
        function checkVocabMatchingProgress() {
            let completedMatches = 0;
            for (let i = 1; i <= 3; i++) {
                const questionItem = document.querySelector(`.match-item[data-question="${i}"]`);
                if (questionItem && questionItem.classList.contains('matched')) {
                    completedMatches++;
                }
            }
            
            // 如果完成所有配對，更新進度
            if (completedMatches === 3 && !practiceScores.vocabMatchingComplete) {
                completedPractice++;
                correctAnswers++;
                practiceScores.vocabMatchingComplete = 1;
                updateProgressDisplay();
            }
        }
        
        function checkVocabMatching() {
            const feedback = document.getElementById('vocabMatchingFeedback');
            let correctCount = 0;
            
            for (const [question, correctAnswer] of Object.entries(vocabMatchingAnswers)) {
                const questionItem = document.querySelector(`.match-item[data-question="${question}"]`);
                const answerItem = document.querySelector(`.match-item[data-answer="${correctAnswer}"]`);
                
                if (questionItem && questionItem.classList.contains('matched') && 
                    answerItem && answerItem.classList.contains('matched')) {
                    correctCount++;
                }
            }
            
            if (correctCount === 3) {
                feedback.className = 'feedback correct';
                feedback.innerHTML = '✅ 太棒了！全部正確！';
            } else {
                feedback.className = 'feedback incorrect';
                feedback.innerHTML = `❌ 已完成 ${correctCount}/3 個配對`;
            }
            
            feedback.style.display = 'block';
        }
        
        function resetVocabMatching() {
            const allItems = document.querySelectorAll('.match-item');
            allItems.forEach(item => {
                item.classList.remove('selected', 'matched');
                clearElementMark(item);
                item.style.borderColor = 'transparent';
            });
            
            selectedVocabQuestion = null;
            selectedVocabAnswer = null;
            
            const feedback = document.getElementById('vocabMatchingFeedback');
            feedback.style.display = 'none';
            
            // 移除進度
            if (practiceScores.vocabMatchingComplete) {
                completedPractice--;
                correctAnswers--;
                delete practiceScores.vocabMatchingComplete;
                for (let i = 1; i <= 3; i++) {
                    delete practiceScores[`vocabMatch${i}`];
                }
                updateProgressDisplay();
            }
        }
        
        // 練習3：閱讀理解選擇題
        function checkReadingComp() {
            const feedback = document.getElementById('readingCompFeedback');
            let correctCount = 0;
            let answeredCount = 0;
            
            for (const [id, answer] of Object.entries(readingCompAnswers)) {
                const selectedOption = document.querySelector(`.option.selected[data-question="${id}"]`);
                
                if (selectedOption) {
                    answeredCount++;
                    const userAnswer = selectedOption.getAttribute('data-answer');
                    
                    clearElementMark(selectedOption);
                    
                    if (userAnswer === answer) {
                        markElementCorrect(selectedOption);
                        correctCount++;
                    } else {
                        markElementIncorrect(selectedOption);
                    }
                }
            }
            
            if (answeredCount === 0) {
                feedback.className = 'feedback incorrect';
                feedback.innerHTML = '❌ 請先選擇答案！';
            } else if (answeredCount < 6) {
                feedback.className = 'feedback incorrect';
                feedback.innerHTML = `❌ 還有 ${6 - answeredCount} 題未回答`;
            } else if (correctCount === 6) {
                feedback.className = 'feedback correct';
                feedback.innerHTML = '✅ 太棒了！全部正確！';
                
                // 更新進度
                if (!practiceScores.readingComp) {
                    completedPractice++;
                    correctAnswers++;
                    practiceScores.readingComp = 1;
                    updateProgressDisplay();
                }
            } else {
                feedback.className = 'feedback incorrect';
                feedback.innerHTML = `❌ 正確: ${correctCount}/6`;
            }
            
            feedback.style.display = 'block';
        }
        
        function resetReadingComp() {
            const allOptions = document.querySelectorAll('.option[data-question]');
            allOptions.forEach(option => {
                option.classList.remove('selected');
                clearElementMark(option);
                option.style.borderColor = 'transparent';
            });
            
            const feedback = document.getElementById('readingCompFeedback');
            feedback.style.display = 'none';
            
            // 移除進度
            if (practiceScores.readingComp) {
                completedPractice--;
                correctAnswers--;
                delete practiceScores.readingComp;
                updateProgressDisplay();
            }
        }
        
        // 練習4：閱讀理解問答題

function checkReadingQA() {
    let allCorrect = true;
    
    for (let i = 1; i <= 4; i++) {
        const answerId = `q4-${i}`;  // ← 修正這裡，移除"-answer"
        const resultId = `q4-${i}-result`;
        
        const input = document.getElementById(`q4-${i}-answer`);
        const result = document.getElementById(resultId);
        const answerData = answers[answerId];  // 現在會正確找到 answers["q4-1"] 等
        
        if (!answerData) {
            console.log(`未找到答案數據: ${answerId}`);
            continue;
        }
               
                const userAnswer = input.value.trim().toLowerCase();
                const correctAnswer = answerData.answer.toLowerCase();
                
                clearElementMark(input);
                
                // 檢查答案
                let correct = false;
                
                if (answerData.type === "sentence") {
                    // 句子題，允許一定變體
                    const normalizedUserAnswer = userAnswer.replace(/[.?]$/, '');
                    const normalizedCorrectAnswer = correctAnswer.replace(/[.?]$/, '');
                    
                    // 檢查是否匹配主答案或變體
                    correct = normalizedUserAnswer === normalizedCorrectAnswer;
                    
                    if (!correct && answerData.variations) {
                        for (const variation of answerData.variations) {
                            const normalizedVariation = variation.toLowerCase().replace(/[.?]$/, '');
                            if (normalizedUserAnswer === normalizedVariation) {
                                correct = true;
                                break;
                            }
                        }
                    }
                }
                
                if (correct) {
                    result.textContent = "✅ 正確！";
                    result.className = "result correct";
                    markElementCorrect(input);
                } else {
                    result.textContent = `❌ 不正確，參考答案: ${answerData.answer}`;
                    result.className = "result incorrect";
                    markElementIncorrect(input);
                    allCorrect = false;
                }
                
                result.style.display = "block";
            }
            
            // 更新進度
            if (allCorrect && !practiceScores.readingQA) {
                completedPractice++;
                correctAnswers++;
                practiceScores.readingQA = 1;
                updateProgressDisplay();
            }
        }
        
        function resetReadingQA() {
            for (let i = 1; i <= 4; i++) {
                const answerId = `q4-${i}-answer`;
                const resultId = `q4-${i}-result`;
                
                const input = document.getElementById(answerId);
                const result = document.getElementById(resultId);
                
                if (input) {
                    input.value = '';
                    clearElementMark(input);
                }
                if (result) {
                    result.style.display = 'none';
                }
            }
            
            // 移除進度
            if (practiceScores.readingQA) {
                completedPractice--;
                correctAnswers--;
                delete practiceScores.readingQA;
                updateProgressDisplay();
            }
        }
        
        // 練習5：句型運用題
        function checkSentencePattern() {
            const feedback = document.getElementById('sentencePatternFeedback');
            let correctCount = 0;
            let emptyCount = 0;
            const totalQuestions = 4;
            
            for (let i = 1; i <= totalQuestions; i++) {
                const inputId = `sentence${i}`;
                const input = document.getElementById(inputId);
                const answerData = answers[inputId];
                
                if (!answerData) continue;
                
                const userAnswer = input.value.trim().toLowerCase();
                const correctAnswer = answerData.answer.toLowerCase();
                
                if (userAnswer === '') {
                    emptyCount++;
                    input.style.borderColor = '#ff9800';
                    input.style.backgroundColor = '#fff3cd';
                } else if (userAnswer === correctAnswer) {
                    markElementCorrect(input);
                    correctCount++;
                } else {
                    markElementIncorrect(input);
                }
            }
            
            feedback.style.display = 'block';
            
            if (emptyCount === totalQuestions) {
                feedback.className = 'feedback incorrect';
                feedback.innerHTML = '❌ 請先填寫所有答案！';
            } else if (emptyCount > 0) {
                feedback.className = 'feedback incorrect';
                feedback.innerHTML = `❌ 還有 ${emptyCount} 題未填寫！`;
            } else if (correctCount === totalQuestions) {
                feedback.className = 'feedback correct';
                feedback.innerHTML = '✅ 太棒了！全部正確！';
                
                // 更新進度
                if (!practiceScores.sentencePattern) {
                    completedPractice++;
                    correctAnswers++;
                    practiceScores.sentencePattern = 1;
                    updateProgressDisplay();
                }
            } else {
                feedback.className = 'feedback incorrect';
                feedback.innerHTML = `❌ 正確: ${correctCount}/${totalQuestions}`;
            }
        }
        
        function resetSentencePattern() {
            for (let i = 1; i <= 4; i++) {
                const inputId = `sentence${i}`;
                const input = document.getElementById(inputId);
                if (input) {
                    input.value = '';
                    clearElementMark(input);
                }
            }
            
            const feedback = document.getElementById('sentencePatternFeedback');
            feedback.style.display = 'none';
            
            // 移除進度
            if (practiceScores.sentencePattern) {
                completedPractice--;
                correctAnswers--;
                delete practiceScores.sentencePattern;
                updateProgressDisplay();
            }
        }
        
        // 練習6：比較級與最高級運用題
        function checkComparative() {
            const feedback = document.getElementById('comparativeFeedback');
            let correctCount = 0;
            let emptyCount = 0;
            const totalQuestions = 6;
            
            for (let i = 1; i <= totalQuestions; i++) {
                const inputId = `comparative${i}`;
                const input = document.getElementById(inputId);
                const answerData = answers[inputId];
                
                if (!answerData) continue;
                
                const userAnswer = input.value.trim().toLowerCase();
                const correctAnswer = answerData.answer.toLowerCase();
                
                if (userAnswer === '') {
                    emptyCount++;
                    input.style.borderColor = '#ff9800';
                    input.style.backgroundColor = '#fff3cd';
                } else if (userAnswer === correctAnswer) {
                    markElementCorrect(input);
                    correctCount++;
                } else {
                    markElementIncorrect(input);
                }
            }
            
            feedback.style.display = 'block';
            
            if (emptyCount === totalQuestions) {
                feedback.className = 'feedback incorrect';
                feedback.innerHTML = '❌ 請先填寫所有答案！';
            } else if (emptyCount > 0) {
                feedback.className = 'feedback incorrect';
                feedback.innerHTML = `❌ 還有 ${emptyCount} 題未填寫！`;
            } else if (correctCount === totalQuestions) {
                feedback.className = 'feedback correct';
                feedback.innerHTML = '✅ 太棒了！全部正確！';
                
                // 更新進度
                if (!practiceScores.comparative) {
                    completedPractice++;
                    correctAnswers++;
                    practiceScores.comparative = 1;
                    updateProgressDisplay();
                }
            } else {
                feedback.className = 'feedback incorrect';
                feedback.innerHTML = `❌ 正確: ${correctCount}/${totalQuestions}`;
            }
        }
        
        function resetComparative() {
            for (let i = 1; i <= 6; i++) {
                const inputId = `comparative${i}`;
                const input = document.getElementById(inputId);
                if (input) {
                    input.value = '';
                    clearElementMark(input);
                }
            }
            
            const feedback = document.getElementById('comparativeFeedback');
            feedback.style.display = 'none';
            
            // 移除進度
            if (practiceScores.comparative) {
                completedPractice--;
                correctAnswers--;
                delete practiceScores.comparative;
                updateProgressDisplay();
            }
        }
        
        // 練習7：小組討論題
        function showReferenceAnswers() {
            for (let i = 1; i <= 3; i++) {
                const refAnswer = document.getElementById(`refAnswer${i}`);
                if (refAnswer) {
                    refAnswer.classList.add('show');
                }
            }
        }
        
        function resetDiscussion() {
            for (let i = 1; i <= 3; i++) {
                const textarea = document.getElementById(`discussion${i}`);
                const refAnswer = document.getElementById(`refAnswer${i}`);
                
                if (textarea) {
                    textarea.value = '';
                }
                if (refAnswer) {
                    refAnswer.classList.remove('show');
                }
            }
        }
        
        // 練習8：科技產品分類拖拽
        function initializeDragAndDrop() {
            const dragItems = document.querySelectorAll('.drag-item[data-gadget]');
            const oldZone = document.getElementById('oldGadgetsZone');
            const newZone = document.getElementById('newGadgetsZone');
            
            dragItems.forEach(item => {
                item.setAttribute('draggable', 'true');
                
                item.addEventListener('dragstart', function(e) {
                    this.classList.add('dragging');
                    e.dataTransfer.setData('text/plain', JSON.stringify({
                        gadget: this.getAttribute('data-gadget'),
                        category: this.getAttribute('data-category'),
                        elementId: this.id || `drag-${Date.now()}`
                    }));
                });
                
                item.addEventListener('dragend', function() {
                    this.classList.remove('dragging');
                });
            });
            
            // 舊科技產品區域
            if (oldZone) {
                oldZone.addEventListener('dragover', function(e) {
                    e.preventDefault();
                    this.style.backgroundColor = '#dce5f0';
                });
                
                oldZone.addEventListener('dragleave', function() {
                    this.style.backgroundColor = '#eef2f7';
                });
                
                oldZone.addEventListener('drop', function(e) {
                    e.preventDefault();
                    this.style.backgroundColor = '#eef2f7';
                    
                    try {
                        const data = JSON.parse(e.dataTransfer.getData('text/plain'));
                        handleDrop(data, 'old');
                    } catch (error) {
                        console.error('拖拽數據解析錯誤:', error);
                    }
                });
            }
            
            // 新科技產品區域
            if (newZone) {
                newZone.addEventListener('dragover', function(e) {
                    e.preventDefault();
                    this.style.backgroundColor = '#dce5f0';
                });
                
                newZone.addEventListener('dragleave', function() {
                    this.style.backgroundColor = '#eef2f7';
                });
                
                newZone.addEventListener('drop', function(e) {
                    e.preventDefault();
                    this.style.backgroundColor = '#eef2f7';
                    
                    try {
                        const data = JSON.parse(e.dataTransfer.getData('text/plain'));
                        handleDrop(data, 'new');
                    } catch (error) {
                        console.error('拖拽數據解析錯誤:', error);
                    }
                });
            }
        }
        
        function handleDrop(data, targetCategory) {
            const gadget = data.gadget;
            const originalCategory = data.category;
            
            // 保存歷史記錄
            dragHistory.push({
                gadget: gadget,
                fromCategory: getCurrentCategory(gadget),
                toCategory: targetCategory,
                timestamp: Date.now()
            });
            
            // 如果物品已經在目標區域，先移除
            const existingItems = document.querySelectorAll('.dropped-item');
            existingItems.forEach(item => {
                if (item.getAttribute('data-gadget') === gadget) {
                    item.remove();
                }
            });
            
            // 創建新的放置項目
            const droppedItem = document.createElement('div');
            droppedItem.className = 'dropped-item';
            droppedItem.textContent = gadget;
            droppedItem.setAttribute('data-gadget', gadget);
            droppedItem.setAttribute('data-category', targetCategory);
            
            // 添加到目標區域
            if (targetCategory === 'old') {
                document.getElementById('oldGadgetsItems').appendChild(droppedItem);
            } else {
                document.getElementById('newGadgetsItems').appendChild(droppedItem);
            }
            
            // 更新原始拖拽項目的狀態
            const dragItem = document.querySelector(`.drag-item[data-gadget="${gadget}"]`);
            if (dragItem) {
                dragItem.style.opacity = '0.3';
                dragItem.style.pointerEvents = 'none';
            }
        }
        
        function getCurrentCategory(gadget) {
            const oldItem = document.querySelector(`#oldGadgetsItems .dropped-item[data-gadget="${gadget}"]`);
            const newItem = document.querySelector(`#newGadgetsItems .dropped-item[data-gadget="${gadget}"]`);
            
            if (oldItem) return 'old';
            if (newItem) return 'new';
            return 'none';
        }
        
        function checkGadgetSorting() {
            const feedback = document.getElementById('gadgetSortingFeedback');
            let correctCount = 0;
            const totalGadgets = Object.keys(gadgetCategories).length;
            
            // 檢查舊科技產品
            const oldItems = document.querySelectorAll('#oldGadgetsItems .dropped-item');
            oldItems.forEach(item => {
                const gadget = item.getAttribute('data-gadget');
                const dragItem = document.querySelector(`.drag-item[data-gadget="${gadget}"]`);
                
                if (gadgetCategories[gadget] === 'old') {
                    markElementCorrect(dragItem);
                    markElementCorrect(item);
                    correctCount++;
                } else {
                    markElementIncorrect(dragItem);
                    markElementIncorrect(item);
                }
            });
            
            // 檢查新科技產品
            const newItems = document.querySelectorAll('#newGadgetsItems .dropped-item');
            newItems.forEach(item => {
                const gadget = item.getAttribute('data-gadget');
                const dragItem = document.querySelector(`.drag-item[data-gadget="${gadget}"]`);
                
                if (gadgetCategories[gadget] === 'new') {
                    markElementCorrect(dragItem);
                    markElementCorrect(item);
                    correctCount++;
                } else {
                    markElementIncorrect(dragItem);
                    markElementIncorrect(item);
                }
            });
            
            // 檢查未放置的物品
            const unplacedItems = document.querySelectorAll('.drag-item[data-gadget]:not([style*="opacity: 0.3"])');
            unplacedItems.forEach(item => {
                markElementIncorrect(item);
            });
            
            // 顯示反饋
            if (correctCount === totalGadgets) {
                feedback.className = 'feedback correct';
                feedback.innerHTML = '✅ 太棒了！分類完全正確！';
                
                // 更新進度
                if (!practiceScores.gadgetSorting) {
                    completedPractice++;
                    correctAnswers++;
                    practiceScores.gadgetSorting = 1;
                    updateProgressDisplay();
                }
            } else {
                feedback.className = 'feedback incorrect';
                feedback.innerHTML = `❌ 正確分類: ${correctCount}/${totalGadgets}`;
            }
            
            feedback.style.display = 'block';
        }
        
        function undoLastDrag() {
            if (dragHistory.length === 0) {
                showSilentNotification('沒有可以返回的操作');
                return;
            }
            
            const lastAction = dragHistory.pop();
            const gadget = lastAction.gadget;
            
            // 從當前區域移除
            if (lastAction.toCategory === 'old') {
                const item = document.querySelector(`#oldGadgetsItems .dropped-item[data-gadget="${gadget}"]`);
                if (item) item.remove();
            } else {
                const item = document.querySelector(`#newGadgetsItems .dropped-item[data-gadget="${gadget}"]`);
                if (item) item.remove();
            }
            
            // 恢復拖拽項目
            const dragItem = document.querySelector(`.drag-item[data-gadget="${gadget}"]`);
            if (dragItem) {
                dragItem.style.opacity = '1';
                dragItem.style.pointerEvents = 'auto';
                clearElementMark(dragItem);
            }
            
            showSilentNotification('已返回上一步');
        }
        
        function resetGadgetSorting() {
            // 清空放置區域
            document.getElementById('oldGadgetsItems').innerHTML = '';
            document.getElementById('newGadgetsItems').innerHTML = '';
            
            // 恢復所有拖拽項目
            const dragItems = document.querySelectorAll('.drag-item[data-gadget]');
            dragItems.forEach(item => {
                item.style.opacity = '1';
                item.style.pointerEvents = 'auto';
                clearElementMark(item);
            });
            
            // 清空歷史記錄
            dragHistory = [];
            
            const feedback = document.getElementById('gadgetSortingFeedback');
            feedback.style.display = 'none';
            
            // 移除進度
            if (practiceScores.gadgetSorting) {
                completedPractice--;
                correctAnswers--;
                delete practiceScores.gadgetSorting;
                updateProgressDisplay();
            }
        }
        
        // 歌曲理解題
        function showLyricExplanation(lineNum) {
            // 隱藏所有解釋
            document.querySelectorAll('.lyric-explanation').forEach(exp => {
                exp.classList.remove('show');
            });
            
            // 顯示點擊的解釋
            const explanation = document.getElementById(`explanation${lineNum}`);
            if (explanation) {
                explanation.classList.add('show');
            }
        }
        
        function checkSongQuestions() {
            let allCorrect = true;
            
            for (let i = 1; i <= 4; i++) {
                const answerId = `songQ${i}`;
                const resultId = `songQ${i}-result`;
                
                const input = document.getElementById(answerId);
                const result = document.getElementById(resultId);
                const answerData = answers[answerId];
                
                if (!answerData) continue;
                
                const userAnswer = input.value.trim().toLowerCase();
                const correctAnswer = answerData.answer.toLowerCase();
                
                clearElementMark(input);
                
                // 檢查答案
                let correct = false;
                
                if (answerData.type === "sentence" || answerData.type === "word") {
                    // 句子題或單詞題，允許一定變體
                    const normalizedUserAnswer = userAnswer.replace(/[.?]$/, '');
                    const normalizedCorrectAnswer = correctAnswer.replace(/[.?]$/, '');
                    
                    // 檢查是否匹配主答案或變體
                    correct = normalizedUserAnswer === normalizedCorrectAnswer;
                    
                    if (!correct && answerData.variations) {
                        for (const variation of answerData.variations) {
                            const normalizedVariation = variation.toLowerCase().replace(/[.?]$/, '');
                            if (normalizedUserAnswer === normalizedVariation) {
                                correct = true;
                                break;
                            }
                        }
                    }
                }
                
                if (correct) {
                    result.textContent = "✅ 正確！";
                    result.className = "result correct";
                    markElementCorrect(input);
                } else {
                    result.textContent = `❌ 不正確，參考答案: ${answerData.answer}`;
                    result.className = "result incorrect";
                    markElementIncorrect(input);
                    allCorrect = false;
                }
                
                result.style.display = "block";
            }
            
            // 更新進度（歌曲理解題不計入主要練習進度）
            if (allCorrect) {
                showSilentNotification('歌曲理解題全部正確！');
            }
        }
        
        function resetSongQuestions() {
            for (let i = 1; i <= 4; i++) {
                const answerId = `songQ${i}`;
                const resultId = `songQ${i}-result`;
                
                const input = document.getElementById(answerId);
                const result = document.getElementById(resultId);
                
                if (input) {
                    input.value = '';
                    clearElementMark(input);
                }
                if (result) {
                    result.style.display = 'none';
                }
            }
        }
        
        // ==================== 測驗功能 ====================

function submitQuiz() {
    let score = 0;
    const totalQuestions = 9; // 9題，滿分15分
    
    // 1. 檢查事實與觀點題 (2題，每題1分)
    for(let i = 1; i <= 2; i++) {
        const selectedOption = document.querySelector(`.option.selected[data-quiz="${i}"]`);
        if(selectedOption) {
            const userAnswer = selectedOption.getAttribute('data-answer');
            if(userAnswer === quizAnswers[i]) {
                markElementCorrect(selectedOption);
                score += 1;
            } else {
                markElementIncorrect(selectedOption);
                // 顯示正確答案
                const correctOption = document.querySelector(`.option[data-quiz="${i}"][data-answer="${quizAnswers[i]}"]`);
                if(correctOption) {
                    markElementCorrect(correctOption);
                }
            }
        } else {
            // 未答題目，顯示正確答案
            const correctOption = document.querySelector(`.option[data-quiz="${i}"][data-answer="${quizAnswers[i]}"]`);
            if(correctOption) {
                markElementCorrect(correctOption);
            }
        }
    }
    
    // 2. 檢查詞彙匹配題 (2題，每題1分)
    for(let i = 1; i <= 2; i++) {
        const selectedOption = document.querySelector(`.option.selected[data-match="${i}"]`);
        if(selectedOption) {
            const userAnswer = selectedOption.getAttribute('data-answer');
            if(userAnswer === quizAnswers[`match${i}`]) {
                markElementCorrect(selectedOption);
                score += 1;
            } else {
                markElementIncorrect(selectedOption);
                // 顯示正確答案
                const correctOption = document.querySelector(`.option[data-match="${i}"][data-answer="${quizAnswers[`match${i}`]}"]`);
                if(correctOption) {
                    markElementCorrect(correctOption);
                }
            }
        } else {
            // 未答題目，顯示正確答案
            const correctOption = document.querySelector(`.option[data-match="${i}"][data-answer="${quizAnswers[`match${i}`]}"]`);
            if(correctOption) {
                markElementCorrect(correctOption);
            }
        }
    }
    
    // 3. 檢查閱讀理解題 (2題，每題2分)
    for(let i = 1; i <= 2; i++) {
        const selectedOption = document.querySelector(`.option.selected[data-reading="${i}"]`);
        if(selectedOption) {
            const userAnswer = selectedOption.getAttribute('data-answer');
            if(userAnswer === quizAnswers[`reading${i}`]) {
                markElementCorrect(selectedOption);
                score += 2;
            } else {
                markElementIncorrect(selectedOption);
                // 顯示正確答案
                const correctOption = document.querySelector(`.option[data-reading="${i}"][data-answer="${quizAnswers[`reading${i}`]}"]`);
                if(correctOption) {
                    markElementCorrect(correctOption);
                }
            }
        } else {
            // 未答題目，顯示正確答案
            const correctOption = document.querySelector(`.option[data-reading="${i}"][data-answer="${quizAnswers[`reading${i}`]}"]`);
            if(correctOption) {
                markElementCorrect(correctOption);
            }
        }
    }
    
    // 4. 檢查比較級填空題 (2題，每題2分) - 更新部分
    const quizBlank1 = document.getElementById('quizBlank1').value.trim().toLowerCase();
    const quizBlank2 = document.getElementById('quizBlank2').value.trim().toLowerCase();
    const result1 = document.getElementById('quizBlank1-result');
    const result2 = document.getElementById('quizBlank2-result');
    
    // 第一題
    if(quizBlank1 === quizAnswers.quizBlank1) {
        markElementCorrect(document.getElementById('quizBlank1'));
        result1.textContent = "✅ 正確！";
        result1.className = "result correct";
        result1.style.display = "block";
        score += 2;
    } else {
        if(quizBlank1 !== '') {
            markElementIncorrect(document.getElementById('quizBlank1'));
            result1.textContent = `❌ 不正確。正確答案: ${quizAnswers.quizBlank1}`;
        } else {
            result1.textContent = `❌ 未回答。正確答案: ${quizAnswers.quizBlank1}`;
            document.getElementById('quizBlank1').style.borderColor = '#ff9800';
            document.getElementById('quizBlank1').style.backgroundColor = '#fff3cd';
        }
        result1.className = "result incorrect";
        result1.style.display = "block";
    }
    
    // 第二題
    if(quizBlank2 === quizAnswers.quizBlank2) {
        markElementCorrect(document.getElementById('quizBlank2'));
        result2.textContent = "✅ 正確！";
        result2.className = "result correct";
        result2.style.display = "block";
        score += 2;
    } else {
        if(quizBlank2 !== '') {
            markElementIncorrect(document.getElementById('quizBlank2'));
            result2.textContent = `❌ 不正確。正確答案: ${quizAnswers.quizBlank2}`;
        } else {
            result2.textContent = `❌ 未回答。正確答案: ${quizAnswers.quizBlank2}`;
            document.getElementById('quizBlank2').style.borderColor = '#ff9800';
            document.getElementById('quizBlank2').style.backgroundColor = '#fff3cd';
        }
        result2.className = "result incorrect";
        result2.style.display = "block";
    }
    
    // 5. 檢查造句題 (1題，3分) - 更新部分
    const sentenceAnswer = document.getElementById('sentenceAnswer').value.trim();
    const sentenceResult = document.getElementById('sentenceAnswer-result');
    
    // 更寬鬆的評分標準：只要包含"both"和"and"，並且結構大致正確
    const hasBoth = sentenceAnswer.toLowerCase().includes('both');
    const hasAnd = sentenceAnswer.toLowerCase().includes('and');
    const isValidStructure = hasBoth && hasAnd && sentenceAnswer.split(' ').length >= 5;
    
    if(sentenceAnswer !== '' && isValidStructure) {
        markElementCorrect(document.getElementById('sentenceAnswer'));
        sentenceResult.textContent = "✅ 正確！句子結構完整。(內容仍需核實)";
        sentenceResult.className = "result correct";
        sentenceResult.style.display = "block";
        score += 3;
    } else if(sentenceAnswer !== '') {
        markElementIncorrect(document.getElementById('sentenceAnswer'));
        sentenceResult.innerHTML = `❌ 需要改進。<br>
        <strong>你的答案：</strong> ${sentenceAnswer || '(未填寫)'}<br>
        <strong>參考範例：</strong> ${quizAnswers.sentenceAnswer}<br>
        <strong>提示：</strong> 使用 "both ... and ..." 句型，例如 "I like both apples and oranges."`;
        sentenceResult.className = "result incorrect";
        sentenceResult.style.display = "block";
    } else {
        sentenceResult.innerHTML = `❌ 未回答。<br>
        <strong>參考範例：</strong> ${quizAnswers.sentenceAnswer}<br>
        <strong>提示：</strong> 使用 "both ... and ..." 句型，例如 "I like both apples and oranges."`;
        sentenceResult.className = "result incorrect";
        sentenceResult.style.display = "block";
        document.getElementById('sentenceAnswer').style.borderColor = '#ff9800';
        document.getElementById('sentenceAnswer').style.backgroundColor = '#fff3cd';
    }
    
    // 顯示分數
    const scoreContainer = document.getElementById('scoreContainer');
    const scoreElement = document.getElementById('score');
    const scoreMessage = document.getElementById('scoreMessage');
    
    // 計算百分比
    const percentage = Math.round((score / 15) * 100);
    
    // 顯示正確的分數
    scoreElement.textContent = `${score}/15 (${percentage}%)`;
    
    // 根據分數顯示不同訊息
    if(score === 15) {
        scoreMessage.textContent = "🎉 太棒了！滿分！你是科技產品專家！";
    } else if(score >= 12) {
        scoreMessage.textContent = "👍 做得很好！繼續保持！";
    } else if(score >= 9) {
        scoreMessage.textContent = "✓ 還不錯，再複習一下會更好！";
    } else {
        scoreMessage.textContent = "💪 需要多加練習，再試一次吧！";
    }
    
    // 添加詳細結果分析
// 移除之前可能存在的詳細結果分析
const existingDetails = scoreContainer.querySelector('.quiz-details');
if (existingDetails) {
    existingDetails.remove();
}

// 添加新的詳細結果分析
const quizDetails = document.createElement('div');
quizDetails.className = 'quiz-details';
quizDetails.innerHTML = `
    <h4>📊 測驗詳細結果</h4>
    <h5>✅ 答對題數：${score}/15 分</h5>
    <h5>📈 正確率：${percentage}%</h5>
    <h5>💡 學習建議：</h5>
    <div class="answer-status ${score === 15 ? 'correct' : score >= 12 ? 'incorrect' : 'unanswered'}">
        ${score === 15 ? '優秀！你已掌握本單元重點。' : 
          score >= 12 ? '良好！建議複習錯誤的部分。' : 
          '加油！建議重新學習單元內容。'}
    </div>
    <h5>🔍 答題情況：</h5>
    <div class="answer-status ${quizBlank1 === quizAnswers.quizBlank1 ? 'correct' : 'incorrect'}">
        比較級填空題1：${quizBlank1 === quizAnswers.quizBlank1 ? '正確' : '錯誤'} ${quizBlank1 === '' ? '(未回答)' : ''}
    </div>
    <div class="answer-status ${quizBlank2 === quizAnswers.quizBlank2 ? 'correct' : 'incorrect'}">
        比較級填空題2：${quizBlank2 === quizAnswers.quizBlank2 ? '正確' : '錯誤'} ${quizBlank2 === '' ? '(未回答)' : ''}
    </div>
    <div class="answer-status ${isValidStructure ? 'correct' : 'incorrect'}">
        句型運用題：${isValidStructure ? '正確' : '需要改進'} ${sentenceAnswer === '' ? '(未回答)' : ''}
    </div>
`;



// 插入到分數容器前
scoreContainer.insertBefore(quizDetails, scoreElement);

    // 顯示成績單
    scoreContainer.style.display = "block";
    scoreContainer.scrollIntoView({ behavior: 'smooth' });
    
    // 保存測驗成績
    practiceScores.quiz = score;
    saveProgress();
}

function resetQuiz() {
    // 重置所有選擇題
    const options = document.querySelectorAll('.option[data-quiz], .option[data-match], .option[data-reading]');
    options.forEach(option => {
        option.classList.remove('selected', 'correct-answer', 'incorrect-answer');
        option.style.borderColor = 'transparent';
        option.style.backgroundColor = '';
    });
    
    // 重置填空題
    const blanks = ['quizBlank1', 'quizBlank2', 'sentenceAnswer'];
    blanks.forEach(blankId => {
        const input = document.getElementById(blankId);
        if (input) {
            input.value = '';
            input.placeholder = blankId === 'sentenceAnswer' ? '請輸入句子' : '';
            input.classList.remove('correct-answer', 'incorrect-answer');
            input.style.borderColor = '#ddd';
            input.style.backgroundColor = 'white';
        }
        
        // 重置結果顯示
        const result = document.getElementById(`${blankId}-result`);
        if (result) {
            result.textContent = '';
            result.className = 'result';
            result.style.display = 'none';
        }
    });
    
    // 移除詳細結果分析
    const existingDetails = document.querySelector('.quiz-details');
    if (existingDetails) {
        existingDetails.remove();
    }
    
    // 隱藏分數容器
    document.getElementById('scoreContainer').style.display = "none";
}

        // ==================== 輔助功能 ====================
        function handleOptionClick(option) {
            const questionNum = option.getAttribute('data-quiz') || option.getAttribute('data-match') || 
                               option.getAttribute('data-reading') || option.getAttribute('data-question');
            const type = option.getAttribute('data-quiz') ? 'quiz' : 
                         option.getAttribute('data-match') ? 'match' : 
                         option.getAttribute('data-reading') ? 'reading' : 
                         option.getAttribute('data-question') ? 'question' : 
                         option.getAttribute('data-answer') ? 'practice' : 'unknown';
            
            // 移除同一問題中其他選項的選中狀態
            if(type === 'question' || type === 'quiz' || type === 'match' || type === 'reading') {
                const siblings = document.querySelectorAll(`.option[data-${type}="${questionNum}"]`);
                siblings.forEach(sib => {
                    sib.classList.remove('selected');
                    sib.style.borderColor = 'transparent';
                });
            } else if(type === 'practice') {
                const siblings = option.parentElement.querySelectorAll('.option');
                siblings.forEach(sib => {
                    sib.classList.remove('selected');
                    sib.style.borderColor = 'transparent';
                });
            }
            
            // 添加選中狀態
            option.classList.add('selected');
            option.style.borderColor = '#2980b9';
            option.focus();
        }
        
        function toggleExampleContent(button) {
            const content = button.nextElementSibling;
            const isOpen = content.classList.contains('open');
            
            document.querySelectorAll('.example-content.open').forEach(openContent => {
                if (openContent !== content) {
                    openContent.classList.remove('open');
                    const closeBtn = openContent.previousElementSibling;
                    closeBtn.innerHTML = '<i class="fas fa-comment-dots"></i> 例句';
                }
            });
            
            content.classList.toggle('open');
            button.innerHTML = content.classList.contains('open') 
                ? '<i class="fas fa-times"></i> 關閉例句'
                : '<i class="fas fa-comment-dots"></i> 例句';
        }
        
        function toggleTranslation(translationId) {
            const translationElement = document.getElementById(translationId);
            if (translationElement) {
                translationElement.classList.toggle('show');
                
                const translateButton = document.querySelector(`.translate-btn[data-translation="${translationId}"]`);
                if (translateButton) {
                    if (translationElement.classList.contains('show')) {
                        translateButton.innerHTML = '<i class="fas fa-times"></i>';
                        translateButton.style.backgroundColor = '#e74c3c';
                    } else {
                        translateButton.innerHTML = '<i class="fas fa-language"></i>';
                        translateButton.style.backgroundColor = '#9b59b6';
                    }
                }
            }
        }
        
        // ==================== 靜默通知系統 ====================
        function showSilentNotification(message) {
            const notification = document.getElementById('silentNotification');
            const content = document.getElementById('notificationContent');
            
            content.textContent = message;
            notification.classList.add('show');
            
            // 3秒後自動隱藏
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }
        
        // ==================== 總結功能 ====================
        function showSummary() {
            const progressPercent = Math.round((completedPractice / totalPracticeQuestions) * 100);
            const correctRate = completedPractice > 0 ? Math.round((correctAnswers / completedPractice) * 100) : 0;
            
            // 更新總結內容
            document.getElementById('finalProgress').textContent = `${progressPercent}%`;
            document.getElementById('finalCompleted').textContent = completedPractice;
            
            // 生成星星評價
            const starsContainer = document.getElementById('summaryStars');
            starsContainer.innerHTML = '';
            const starCount = Math.min(5, Math.floor(correctRate / 20));
            
            for (let i = 0; i < 5; i++) {
                const star = document.createElement('i');
                star.className = i < starCount ? 'fas fa-star' : 'far fa-star';
                starsContainer.appendChild(star);
            }
            
            // 檢查薄弱環節
            const weaknesses = analyzeWeaknesses();
            const weaknessSection = document.getElementById('weaknessSection');
            const modalWeaknessList = document.getElementById('modalWeaknessList');
            
            if (weaknesses.length > 0) {
                weaknessSection.style.display = 'block';
                modalWeaknessList.innerHTML = '';
                weaknesses.forEach(weakness => {
                    const li = document.createElement('div');
                    li.className = 'weakness-item';
                    li.textContent = weakness;
                    modalWeaknessList.appendChild(li);
                });
                
                // 更新側邊欄建議
                const weaknessTips = document.getElementById('weaknessTips');
                const weaknessList = document.getElementById('weaknessList');
                weaknessList.innerHTML = '';
                weaknesses.forEach(weakness => {
                    const li = document.createElement('li');
                    li.textContent = weakness;
                    weaknessList.appendChild(li);
                });
                weaknessTips.style.display = 'block';
            } else {
                weaknessSection.style.display = 'none';
                document.getElementById('weaknessTips').style.display = 'none';
            }
            
            // 顯示總結彈窗
            document.getElementById('summaryModal').style.display = 'flex';
        }
        
        function closeSummary() {
            document.getElementById('summaryModal').style.display = 'none';
        }
        
        function analyzeWeaknesses() {
            const weaknesses = [];
            
            // 檢查各類練習
            if (!practiceScores.factOpinion) {
                weaknesses.push('事實與觀點辨析練習');
            }
            
            if (!practiceScores.vocabMatchingComplete) {
                weaknesses.push('詞彙匹配練習');
            }
            
            if (!practiceScores.readingComp) {
                weaknesses.push('閱讀理解選擇題');
            }
            
            if (!practiceScores.readingQA) {
                weaknesses.push('閱讀理解問答題');
            }
            
            if (!practiceScores.sentencePattern) {
                weaknesses.push('句型運用練習');
            }
            
            if (!practiceScores.comparative) {
                weaknesses.push('比較級與最高級練習');
            }
            
            if (!practiceScores.gadgetSorting) {
                weaknesses.push('科技產品分類練習');
            }
            
            return weaknesses.slice(0, 3); // 最多顯示3個
        }
        
        // ==================== 重置所有練習 ====================
        function resetPractice() {
            resetPracticeWithSilentNotification();
        }
        
        function resetPracticeWithSilentNotification() {
            // 重置所有進度數據
            completedPractice = 0;
            correctAnswers = 0;
            practiceScores = {};
            
            // 重置所有練習
            resetFactOpinion();
            resetVocabMatching();
            resetReadingComp();
            resetReadingQA();
            resetSentencePattern();
            resetComparative();
            resetDiscussion();
            resetGadgetSorting();
            resetSongQuestions();
            
            // 隱藏完成訊息
            document.getElementById('completionMessage').style.display = 'none';
            document.getElementById('weaknessTips').style.display = 'none';
            
            // 關閉總結彈窗
            closeSummary();
            
            // 更新進度顯示
            updateProgressDisplay();
            
            // 清除本地存儲
            localStorage.removeItem(STORAGE_KEY);
            
            // 使用靜默通知
            showSilentNotification('已重置所有練習，可以重新開始學習！');
        }
        
        // ==================== 鍵盤導航支持 ====================
        document.addEventListener('keydown', function(e) {
            // Tab鍵導航時添加視覺焦點
            if (e.key === 'Tab') {
                setTimeout(() => {
                    const focused = document.activeElement;
                    if (focused && (focused.classList.contains('option') || 
                        focused.classList.contains('btn') || 
                        focused.classList.contains('tab') ||
                        focused.classList.contains('answer-input') ||
                        focused.classList.contains('checkbox-option'))) {
                        focused.classList.add('focus-visible');
                    }
                }, 10);
            }
        });
        
        document.addEventListener('click', function(e) {
            // 點擊時移除焦點樣式
            document.querySelectorAll('.focus-visible').forEach(el => {
                el.classList.remove('focus-visible');
            });
        });
    </script>
</body>
</html>
